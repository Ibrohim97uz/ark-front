{"ast":null,"code":"import _objectSpread from\"C:\\\\Users\\\\Ibrohim\\\\Desktop\\\\ark-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"C:\\\\Users\\\\Ibrohim\\\\Desktop\\\\ark-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\Ibrohim\\\\Desktop\\\\ark-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\Ibrohim\\\\Desktop\\\\ark-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\Ibrohim\\\\Desktop\\\\ark-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{Card,Input,notification}from\"antd/lib/index\";import ApiRequest from\"../../../../services\";import api from'../../../../services/app';import Filter from'./components/Filter';import Modal from'./components/Modal';import List from'./components/List';import IntlMessages,{intlMessages}from\"../../../../util/IntlMessages\";import{FileView}from\"../../../../components/CustomComponents\";import{apiFileUrl}from\"../../../../util/constants\";var getVacancy=api.getVacancy,postVacancy=api.postVacancy,putVacancy=api.putVacancy,deleteVacancy=api.deleteVacancy,putVacancyView=api.putVacancyView;var TextArea=Input.TextArea;var Vacancy=/*#__PURE__*/function(_Component){_inherits(Vacancy,_Component);var _super=_createSuper(Vacancy);function Vacancy(props){var _this;_classCallCheck(this,Vacancy);_this=_super.call(this,props);_this.onStartEvent=function(payload){ApiRequest(getVacancy,payload).then(function(result){if(result.success){_this.setState({list:result.object});}});};_this.onRequestFunc=function(path,data,message){_this.setState({tableLoading:true});ApiRequest(path,data).then(function(result){if(result.success){_this.setState({actionType:'create',modalVisible:false,currentItem:{},file:null});notification.success({key:message.key,message:message.messageSuccess,description:message.descriptionSuccess});_this.onStartEvent();}else{notification.error({key:message.key,message:message.messageError,description:message.descriptionError});}}).finally(function(){_this.setState({tableLoading:false});});};_this.onFormLocale=function(dataItem){return _this.setState({selectedFormLocale:dataItem});};_this.onSubmit=function(data){var message={};if(_this.state.actionType===\"create\"){message={key:\"create\",messageError:intlMessages({en:\"There was an error creating\",ru:\"Произошла ошибка при создании\",uz:\"Yaratishda xatolik yuz berdi\"}),messageSuccess:intlMessages({en:\"Successfully created\",ru:\"Успешно создан\",uz:\"Muvaffaqqiyatli yaratildi\"})};_this.onRequestFunc(postVacancy,data,message);}if(_this.state.actionType===\"update\"){message={key:\"update\",messageError:intlMessages({en:\"There was an error updating\",ru:\"Произошла ошибка при изменение\",uz:\"Tahrirlashda xatolik yuz berdi\"}),messageSuccess:intlMessages({en:\"Successfully updated\",ru:\"Успешно изменено\",uz:\"Muvaffaqqiyatli tahrirlandi\"})};_this.onRequestFunc(putVacancy,_objectSpread({id:_this.state.currentItem.id},data),message);}};_this.onCancel=function(){_this.setState({modalVisible:false,actionType:'create',file:null,selectedFormLocale:{languageId:'nameEn',locale:'en',name:'English',icon:'us'}});};_this.onAdd=function(){_this.setState({modalVisible:true,actionType:'create'});};_this.onDelete=function(dataItemId){var message={key:\"delete\",messageError:intlMessages({en:\"There was an error deleting\",ru:\"Произошла ошибка при удалении\",uz:\"O'chirishda xatolik yuz berdi\"}),messageSuccess:intlMessages({en:\"Successfully deleted\",ru:\"Успешно удален\",uz:\"Muvaffaqiyatli o'chirildi\"})};_this.onRequestFunc(deleteVacancy,{id:dataItemId},message);};_this.onUpdateView=function(dataItemId){var message={key:\"update\",messageError:intlMessages({en:\"There was an error updating\",ru:\"Произошла ошибка при изменение\",uz:\"Tahrirlashda xatolik yuz berdi\"}),messageSuccess:intlMessages({en:\"Successfully updated\",ru:\"Успешно изменено\",uz:\"Muvaffaqqiyatli tahrirlandi\"})};_this.onRequestFunc(putVacancyView,{path:dataItemId},message);};_this.onEditItem=function(dataItem){_this.setState({actionType:\"update\",currentItem:dataItem,file:dataItem.attachment?{fileUrl:apiFileUrl+dataItem.attachment.id,file:dataItem.attachment}:null,modalVisible:true});};_this.onChangeFile=function(file){_this.setState({file:file});};_this.state={actionType:'create',modalVisible:false,columns:[{title:/*#__PURE__*/React.createElement(\"strong\",null,\"\\u2116\"),key:\"№\",align:\"center\",width:60,render:function render(text,record,index){return index+1;}},// {\n//     title: <IntlMessages id={'attachment'}/>,\n//     key: \"file\",\n//     align: \"center\",\n//     width: 100,\n//     render: (text, record, index) => (\n//         <FileView fileId={record.attachment && record.attachment.id} defaultView={\"picture\"}/>),\n// },\nintlMessages({en:{title:\"Title\",dataIndex:'titleEn',align:\"center\",key:'titleEn'},ru:{title:\"Название\",dataIndex:'titleRu',align:\"center\",key:'titleRu'},uz:{title:\"Sarlavha\",dataIndex:'titleUz',align:\"center\",key:'titleUz'}}),intlMessages({en:{title:\"Description\",dataIndex:'descriptionEn',key:'descriptionEn'},ru:{title:\"Описание\",dataIndex:'descriptionRu',key:'descriptionRu'},uz:{title:\"Ta'rif\",dataIndex:'descriptionUz',key:'descriptionUz'}}),{title:/*#__PURE__*/React.createElement(IntlMessages,{id:'createAt'}),key:'createdAt',align:\"center\",width:100,render:function render(text,record,index){var date=new Date(record.createdAt);return date.getDate()+'/'+date.getMonth()+'/'+date.getFullYear();}}],formItems:[{label:\"Title\",name:'titleEn',rules:[{required:true,message:/*#__PURE__*/React.createElement(IntlMessages,{id:\"E_ERROR\"})}],locale:\"en\",obj:/*#__PURE__*/React.createElement(Input,null)},{label:\"Description\",name:'descriptionEn',rules:[{required:true,message:/*#__PURE__*/React.createElement(IntlMessages,{id:\"E_ERROR\"})}],locale:\"en\",obj:/*#__PURE__*/React.createElement(TextArea,{rows:4,autoSize:true,allowClear:true})},{label:\"Название\",name:'titleRu',locale:\"ru\",obj:/*#__PURE__*/React.createElement(Input,null)},{label:\"Описание\",name:'descriptionRu',locale:\"ru\",obj:/*#__PURE__*/React.createElement(TextArea,{rows:4,autoSize:true,allowClear:true})},{label:\"Sarlavha\",name:'titleUz',locale:\"uz\",obj:/*#__PURE__*/React.createElement(Input,null)},{label:\"Ta'rif\",name:'descriptionUz',locale:\"uz\",obj:/*#__PURE__*/React.createElement(TextArea,{rows:4,autoSize:true,allowClear:true})}],currentItem:{},list:[],pagination:{showSizeChanger:true,showQuickJumper:true,showTotal:function showTotal(total){return\"Total \".concat(total,\" Items\");},current:1,total:0,pageSize:20},selectedFormLocale:{languageId:'nameEn',locale:'en',name:'English',icon:'us'},file:null,tableLoading:false};return _this;}_createClass(Vacancy,[{key:\"componentDidMount\",value:function componentDidMount(){this.onStartEvent();}},{key:\"render\",value:function render(){var _this$state=this.state,currentItem=_this$state.currentItem,modalVisible=_this$state.modalVisible,file=_this$state.file,columns=_this$state.columns,formItems=_this$state.formItems,list=_this$state.list,actionType=_this$state.actionType,pagination=_this$state.pagination,selectedFormLocale=_this$state.selectedFormLocale,tableLoading=_this$state.tableLoading;return/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(Filter,{onAdd:this.onAdd}),/*#__PURE__*/React.createElement(List,{visibleColumns:columns,dataSource:list,loading:tableLoading,onUpdateView:this.onUpdateView,onEditItem:this.onEditItem,pagination:pagination.total>=10?_objectSpread({},pagination):false,onDeleteItem:this.onDelete}),/*#__PURE__*/React.createElement(Modal,{onSubmit:this.onSubmit,onCancel:this.onCancel,onChangeFile:this.onChangeFile,onFormLocale:this.onFormLocale,file:file,modalVisible:modalVisible,selectedFormLocale:selectedFormLocale,formItems:formItems,actionType:actionType,currentItem:actionType==='create'?{}:currentItem}));}}]);return Vacancy;}(Component);export default Vacancy;","map":{"version":3,"sources":["C:/Users/Ibrohim/Desktop/ark-front/src/routes/routesManagers/settings/vacancy/index.js"],"names":["React","Component","Card","Input","notification","ApiRequest","api","Filter","Modal","List","IntlMessages","intlMessages","FileView","apiFileUrl","getVacancy","postVacancy","putVacancy","deleteVacancy","putVacancyView","TextArea","Vacancy","props","onStartEvent","payload","then","result","success","setState","list","object","onRequestFunc","path","data","message","tableLoading","actionType","modalVisible","currentItem","file","key","messageSuccess","description","descriptionSuccess","error","messageError","descriptionError","finally","onFormLocale","dataItem","selectedFormLocale","onSubmit","state","en","ru","uz","id","onCancel","languageId","locale","name","icon","onAdd","onDelete","dataItemId","onUpdateView","onEditItem","attachment","fileUrl","onChangeFile","columns","title","align","width","render","text","record","index","dataIndex","date","Date","createdAt","getDate","getMonth","getFullYear","formItems","label","rules","required","obj","pagination","showSizeChanger","showQuickJumper","showTotal","total","current","pageSize"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\r\nimport {Card, Input, notification} from \"antd/lib/index\";\r\nimport ApiRequest from \"../../../../services\";\r\nimport api from '../../../../services/app'\r\nimport Filter from './components/Filter'\r\nimport Modal from './components/Modal'\r\nimport List from './components/List'\r\nimport IntlMessages, {intlMessages} from \"../../../../util/IntlMessages\";\r\nimport {FileView} from \"../../../../components/CustomComponents\";\r\nimport {apiFileUrl} from \"../../../../util/constants\";\r\n\r\nconst {getVacancy, postVacancy, putVacancy, deleteVacancy, putVacancyView} = api;\r\nconst {TextArea} = Input;\r\n\r\nclass Vacancy extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            actionType: 'create',\r\n            modalVisible: false,\r\n            columns: [{\r\n                title: <strong>№</strong>,\r\n                key: \"№\",\r\n                align:\"center\",\r\n                width: 60,\r\n                render: (text, record, index) => index + 1,\r\n            },\r\n                // {\r\n                //     title: <IntlMessages id={'attachment'}/>,\r\n                //     key: \"file\",\r\n                //     align: \"center\",\r\n                //     width: 100,\r\n                //     render: (text, record, index) => (\r\n                //         <FileView fileId={record.attachment && record.attachment.id} defaultView={\"picture\"}/>),\r\n                // },\r\n                (intlMessages({\r\n                    en: {\r\n                        title: \"Title\",\r\n                        dataIndex: 'titleEn',\r\n                        align: \"center\",\r\n                        key: 'titleEn'\r\n                    }, ru: {\r\n                        title: \"Название\",\r\n                        dataIndex: 'titleRu',\r\n                        align: \"center\",\r\n                        key: 'titleRu'\r\n                    },\r\n                    uz: {\r\n                        title: \"Sarlavha\",\r\n                        dataIndex: 'titleUz',\r\n                        align: \"center\",\r\n                        key: 'titleUz'\r\n                    }\r\n                })),\r\n                (intlMessages({\r\n                    en: {\r\n                        title: \"Description\",\r\n                        dataIndex: 'descriptionEn',\r\n                        key: 'descriptionEn'\r\n                    }, ru: {\r\n                        title: \"Описание\",\r\n                        dataIndex: 'descriptionRu',\r\n                        key: 'descriptionRu'\r\n                    },\r\n                    uz: {\r\n                        title: \"Ta'rif\",\r\n                        dataIndex: 'descriptionUz',\r\n                        key: 'descriptionUz'\r\n                    }\r\n                })),\r\n                {\r\n                    title: <IntlMessages id={'createAt'}/>,\r\n                    key: 'createdAt',\r\n                    align:\"center\",\r\n                    width: 100,\r\n                    render: (text, record, index) => {\r\n                        let date = new Date(record.createdAt);\r\n                        return date.getDate() + '/' + date.getMonth() + '/' + date.getFullYear()\r\n                    },\r\n                }\r\n\r\n            ],\r\n            formItems: [\r\n                {\r\n                    label: \"Title\",\r\n                    name: 'titleEn',\r\n                    rules: [\r\n                        {\r\n                            required: true,\r\n                            message: <IntlMessages id=\"E_ERROR\"/>\r\n\r\n                        },\r\n                    ],\r\n                    locale: \"en\",\r\n                    obj: <Input/>\r\n                },\r\n                {\r\n                    label: \"Description\",\r\n                    name: 'descriptionEn',\r\n                    rules: [\r\n                        {\r\n                            required: true,\r\n                            message: <IntlMessages id=\"E_ERROR\"/>\r\n\r\n                        },\r\n                    ],\r\n                    locale: \"en\",\r\n                    obj: <TextArea rows={4} autoSize allowClear/>\r\n                },\r\n                {\r\n                    label: \"Название\",\r\n                    name: 'titleRu',\r\n                    locale: \"ru\",\r\n                    obj: <Input/>\r\n                },\r\n                {\r\n                    label: \"Описание\",\r\n                    name: 'descriptionRu',\r\n                    locale: \"ru\",\r\n                    obj: <TextArea rows={4} autoSize allowClear/>\r\n                },\r\n                {\r\n                    label: \"Sarlavha\",\r\n                    name: 'titleUz',\r\n                    locale: \"uz\",\r\n                    obj: <Input/>\r\n                },\r\n                {\r\n                    label: \"Ta'rif\",\r\n                    name: 'descriptionUz',\r\n                    locale: \"uz\",\r\n                    obj: <TextArea rows={4} autoSize allowClear/>\r\n                },\r\n            ],\r\n            currentItem: {},\r\n            list: [],\r\n            pagination: {\r\n                showSizeChanger: true,\r\n                showQuickJumper: true,\r\n                showTotal: total => `Total ${total} Items`,\r\n                current: 1,\r\n                total: 0,\r\n                pageSize: 20,\r\n            },\r\n            selectedFormLocale: {\r\n                languageId: 'nameEn',\r\n                locale: 'en',\r\n                name: 'English',\r\n                icon: 'us',\r\n            },\r\n            file: null,\r\n            tableLoading:false\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.onStartEvent()\r\n    }\r\n\r\n    onStartEvent = (payload) => {\r\n        ApiRequest(getVacancy, payload).then((result => {\r\n            if (result.success) {\r\n                this.setState({\r\n                    list: result.object,\r\n                })\r\n            }\r\n        }));\r\n    };\r\n    onRequestFunc = (path, data, message) => {\r\n        this.setState({\r\n          tableLoading:true\r\n        })\r\n        ApiRequest(path, data).then((result => {\r\n            if (result.success) {\r\n                this.setState({\r\n                    actionType: 'create',\r\n                    modalVisible: false,\r\n                    currentItem: {},\r\n                    file: null\r\n                });\r\n                notification.success({\r\n                    key: message.key,\r\n                    message: message.messageSuccess,\r\n                    description: message.descriptionSuccess,\r\n                });\r\n                this.onStartEvent()\r\n            } else {\r\n                notification.error({\r\n                    key: message.key,\r\n                    message: message.messageError,\r\n                    description: message.descriptionError,\r\n                });\r\n            }\r\n        })).finally(()=>{\r\n          this.setState({\r\n            tableLoading:false\r\n          })\r\n        })\r\n    };\r\n    onFormLocale = (dataItem) => {\r\n        return this.setState({\r\n            selectedFormLocale: dataItem\r\n        })\r\n    };\r\n    onSubmit = (data) => {\r\n        let message = {};\r\n        if (this.state.actionType === \"create\") {\r\n            message = {\r\n                key: \"create\",\r\n                messageError: intlMessages({\r\n                    en: \"There was an error creating\",\r\n                    ru: \"Произошла ошибка при создании\",\r\n                    uz: \"Yaratishda xatolik yuz berdi\"\r\n                }),\r\n                messageSuccess: intlMessages({\r\n                    en: \"Successfully created\",\r\n                    ru: \"Успешно создан\",\r\n                    uz: \"Muvaffaqqiyatli yaratildi\"\r\n                }),\r\n            };\r\n            this.onRequestFunc(postVacancy, data, message)\r\n        }\r\n        if (this.state.actionType === \"update\") {\r\n            message = {\r\n                key: \"update\",\r\n                messageError: intlMessages({\r\n                    en: \"There was an error updating\",\r\n                    ru: \"Произошла ошибка при изменение\",\r\n                    uz: \"Tahrirlashda xatolik yuz berdi\"\r\n                }),\r\n                messageSuccess: intlMessages({\r\n                    en: \"Successfully updated\",\r\n                    ru: \"Успешно изменено\",\r\n                    uz: \"Muvaffaqqiyatli tahrirlandi\"\r\n                }),\r\n            };\r\n            this.onRequestFunc(putVacancy, {\r\n                id: this.state.currentItem.id, ...data\r\n            }, message)\r\n        }\r\n    };\r\n    onCancel = () => {\r\n        this.setState({\r\n                modalVisible: false,\r\n                actionType: 'create',\r\n                file: null,\r\n                selectedFormLocale: {\r\n                    languageId: 'nameEn',\r\n                    locale: 'en',\r\n                    name: 'English',\r\n                    icon: 'us',\r\n                }\r\n            }\r\n        )\r\n    };\r\n    onAdd = () => {\r\n        this.setState({modalVisible: true, actionType: 'create'})\r\n    };\r\n    onDelete = (dataItemId) => {\r\n        let message = {\r\n            key: \"delete\",\r\n            messageError: intlMessages({\r\n                en: \"There was an error deleting\",\r\n                ru: \"Произошла ошибка при удалении\",\r\n                uz: \"O'chirishda xatolik yuz berdi\"\r\n            }),\r\n            messageSuccess: intlMessages({\r\n                en: \"Successfully deleted\",\r\n                ru: \"Успешно удален\",\r\n                uz: \"Muvaffaqiyatli o'chirildi\"\r\n            }),\r\n        };\r\n        this.onRequestFunc(deleteVacancy, {id: dataItemId}, message)\r\n    };\r\n    onUpdateView = (dataItemId) => {\r\n        let message = {\r\n            key: \"update\",\r\n            messageError: intlMessages({\r\n                en: \"There was an error updating\",\r\n                ru: \"Произошла ошибка при изменение\",\r\n                uz: \"Tahrirlashda xatolik yuz berdi\"\r\n            }),\r\n            messageSuccess: intlMessages({\r\n                en: \"Successfully updated\",\r\n                ru: \"Успешно изменено\",\r\n                uz: \"Muvaffaqqiyatli tahrirlandi\"\r\n            }),\r\n        };\r\n        this.onRequestFunc(putVacancyView, {path: dataItemId}, message)\r\n    };\r\n    onEditItem = (dataItem) => {\r\n        this.setState({\r\n            actionType: \"update\",\r\n            currentItem: dataItem,\r\n            file: dataItem.attachment ? {\r\n                fileUrl: apiFileUrl + dataItem.attachment.id,\r\n                file: dataItem.attachment\r\n            } : null,\r\n            modalVisible: true,\r\n        })\r\n    };\r\n    onChangeFile = (file) => {\r\n        this.setState({\r\n            file: file\r\n        })\r\n    };\r\n\r\n    render() {\r\n        const {currentItem, modalVisible, file, columns, formItems, list, actionType, pagination, selectedFormLocale,tableLoading} = this.state;\r\n        return (\r\n            <Card>\r\n                <Filter onAdd={this.onAdd}/>\r\n                <List\r\n                  visibleColumns={columns}\r\n                      dataSource={list}\r\n                      loading={tableLoading}\r\n                      onUpdateView={this.onUpdateView}\r\n                      onEditItem={this.onEditItem}\r\n                      pagination={pagination.total >= 10 ? {\r\n                          ...pagination,\r\n                      } : false}\r\n                      onDeleteItem={this.onDelete}/>\r\n                <Modal\r\n                    onSubmit={this.onSubmit}\r\n                    onCancel={this.onCancel}\r\n                    onChangeFile={this.onChangeFile}\r\n                    onFormLocale={this.onFormLocale}\r\n                    file={file}\r\n                    modalVisible={modalVisible}\r\n                    selectedFormLocale={selectedFormLocale}\r\n                    formItems={formItems}\r\n                    actionType={actionType}\r\n                    currentItem={actionType === 'create' ? {} : currentItem}\r\n                />\r\n            </Card>\r\n        );\r\n    }\r\n}\r\n\r\n\r\nexport default Vacancy;\r\n"]},"metadata":{},"sourceType":"module"}