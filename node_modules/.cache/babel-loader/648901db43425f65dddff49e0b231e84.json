{"ast":null,"code":"import _objectSpread from\"C:\\\\Users\\\\Ibrohim\\\\Desktop\\\\ark-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"C:\\\\Users\\\\Ibrohim\\\\Desktop\\\\ark-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\Ibrohim\\\\Desktop\\\\ark-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\Ibrohim\\\\Desktop\\\\ark-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\Ibrohim\\\\Desktop\\\\ark-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{Card,notification}from\"antd/lib/index\";import{Button,Modal}from\"antd\";import ApiRequest from\"../../../../services\";import api from'../../../../services/app';import Filter from'./components/Filter';import FormModal from'./components/Modal';import List from'./components/List';import IntlMessages,{intlMessages}from\"../../../../util/IntlMessages\";import{Redirect}from\"react-router-dom\";import{Icon}from\"antd\";import{apiFileUrl}from\"../../../../util/constants\";var getClient=api.getClient,getClientFile=api.getClientFile,postClient=api.postClient,putClient=api.putClient,deleteClient=api.deleteClient,getService=api.getService,getCountry=api.getCountry,getClientFinish=api.getClientFinish,searchClient=api.searchClient;var Certificates=/*#__PURE__*/function(_Component){_inherits(Certificates,_Component);var _super=_createSuper(Certificates);function Certificates(props){var _this;_classCallCheck(this,Certificates);_this=_super.call(this,props);_this.onDownloadFile=function(fileId){ApiRequest(getClientFile,{path:fileId}).then(function(result){if(result.success){var a=document.createElement(\"a\");a.href=result.object;document.body.appendChild(a);a.target=\"_blank\";a.click();document.body.removeChild(a);}});};_this.getInit=function(){ApiRequest(getService).then(function(result){if(result.success){_this.setState({services:result.object});}});ApiRequest(getCountry).then(function(result){if(result.success){_this.setState(function(state,props){return{countries:result._embedded.list};});}});};_this.getClients=function(payload){ApiRequest(getClient,payload).then(function(result){if(result.success){_this.setState(function(state,props){return{list:result.object,pagination:_objectSpread(_objectSpread({},state.pagination),{},{total:result.totalElements+'||'+result.object+'&&'+result.object.length})};});}});};_this.onRequestFunc=function(path,data,message){ApiRequest(path,data).then(function(result){if(result.success){_this.setState({actionType:'create',modalVisible:false,currentItem:{},file:null});notification.success({key:message.key,message:message.messageSuccess,description:message.descriptionSuccess});_this.getClients();}else{notification.error({key:message.key,message:message.messageError,description:message.descriptionError});}});};_this.onSubmit=function(data){var message={};if(_this.state.actionType===\"create\"){message={key:\"create\",messageError:intlMessages({en:\"There was an error creating\",ru:\"Произошла ошибка при создании\",uz:\"Yaratishda xatolik yuz berdi\"}),messageSuccess:intlMessages({en:\"Successfully created\",ru:\"Успешно создан\",uz:\"Muvaffaqqiyatli yaratildi\"})};_this.onRequestFunc(postClient,data,message);}if(_this.state.actionType===\"update\"){message={key:\"update\",messageError:intlMessages({en:\"There was an error updating\",ru:\"Произошла ошибка при изменение\",uz:\"Tahrirlashda xatolik yuz berdi\"}),messageSuccess:intlMessages({en:\"Successfully updated\",ru:\"Успешно изменено\",uz:\"Muvaffaqqiyatli tahrirlandi\"})};_this.onRequestFunc(putClient,_objectSpread({id:_this.state.currentItem.id},data),message);}};_this.onCancel=function(){_this.setState({modalVisible:false,actionType:'create',file:null,selectedFormLocale:{languageId:'nameEn',locale:'en',name:'English',icon:'us'}});};_this.onAdd=function(){_this.setState({modalVisible:true,actionType:'create'});};_this.onDelete=function(dataItemId){var message={key:\"delete\",messageError:intlMessages({en:\"There was an error deleting\",ru:\"Произошла ошибка при удалении\",uz:\"O'chirishda xatolik yuz berdi\"}),messageSuccess:intlMessages({en:\"Successfully deleted\",ru:\"Успешно удален\",uz:\"Muvaffaqiyatli o'chirildi\"})};_this.onRequestFunc(deleteClient,{id:dataItemId},message);};_this.onEditItem=function(dataItem){_this.setState({actionType:\"update\",currentItem:dataItem,file:dataItem.attachment?{fileUrl:apiFileUrl+dataItem.attachment.id,file:dataItem.attachment,fileStatus:\"create\"}:null,modalVisible:true});};_this.onChange=function(page){_this.setState(function(state,props){return{pagination:_objectSpread(_objectSpread({},state.pagination),{},{current:page})};});_this.getClients({page:page-1});};_this.onShowSizeChange=function(current,size){_this.getClients({page:current-1,size:size});_this.setState(function(state,props){return{pagination:_objectSpread(_objectSpread({},state.pagination),{},{current:current,pageSize:size})};});};_this.onChangeFile=function(file){_this.setState({file:file});};_this.addPoint=function(e){_this.setState({addPoint:e});};_this.onFinish=function(dataItemId){var message={key:\"update\",messageError:intlMessages({en:\"There was an error updating\",ru:\"Произошла ошибка при изменение\",uz:\"Tahrirlashda xatolik yuz berdi\"}),messageSuccess:intlMessages({en:\"Successfully updated\",ru:\"Успешно изменено\",uz:\"Muvaffaqqiyatli tahrirlandi\"})};_this.onRequestFunc(getClientFinish,{path:dataItemId},message);};_this.onChangeSearch=function(text){_this.setState({searchText:text});};_this.handleResetSearch=function(){_this.getClients();_this.setState({searchText:\"\"});};_this.handleSubmitSearch=function(text){ApiRequest(searchClient,{word:_this.state.searchText}).then(function(result){if(result.success){_this.setState({list:result.object});}});};_this.state={actionType:'create',modalVisible:false,searchText:\"\",fileModal:null,columns:[{title:/*#__PURE__*/React.createElement(\"strong\",null,\"\\u2116\"),key:\"№\",align:\"center\",width:60,render:function render(text,record,index){return index+1;}},{title:/*#__PURE__*/React.createElement(IntlMessages,{id:'attachment'}),key:\"file\",align:\"center\",width:100,render:function render(text,record,index){return record.attachment.contentType===\"application/pdf\"?/*#__PURE__*/React.createElement(\"button\",{className:\"bg-transparent border-0 mx-2\",onClick:function onClick(){return _this.onDownloadFile(record.attachment.id);}},/*#__PURE__*/React.createElement(Icon,{type:\"eye\"})):/*#__PURE__*/React.createElement(\"button\",{className:\"bg-transparent border-0 mx-2\",onClick:function onClick(){_this.setState({fileModal:{showModal:true,fileId:record.attachment.id,file:record.attachment}});}},/*#__PURE__*/React.createElement(Icon,{type:\"eye\"}));}},{title:/*#__PURE__*/React.createElement(IntlMessages,{id:'companyName'}),key:\"companyName\",align:\"center\",dataIndex:\"companyName\"},{title:/*#__PURE__*/React.createElement(IntlMessages,{id:'companyStir'}),key:\"companyStir\",align:\"center\",dataIndex:\"companyStir\"},{title:/*#__PURE__*/React.createElement(IntlMessages,{id:'trackingNumber'}),key:\"trackingNumber\",align:\"center\",dataIndex:\"trackingNumber\"},{title:/*#__PURE__*/React.createElement(IntlMessages,{id:'serviceType'}),key:\"serviceType\",align:\"center\",render:function render(text,record,index){return intlMessages({en:record.serviceType&&record.serviceType.titleEn,ru:record.serviceType&&record.serviceType.titleRu,uz:record.serviceType&&record.serviceType.titleUz});}},{title:/*#__PURE__*/React.createElement(IntlMessages,{id:'date'}),key:\"date\",align:\"center\",render:function render(text,record,index){return record.dateOfAgreement.substring(0,10);}},{title:/*#__PURE__*/React.createElement(IntlMessages,{id:'fromCountry'}),key:\"fromCountry\",align:\"center\",render:function render(text,record,index){return intlMessages({en:record.fromCountry&&record.fromCountry.nameEn,ru:record.fromCountry&&record.fromCountry.nameRu,uz:record.fromCountry&&record.fromCountry.nameUz});}},{title:/*#__PURE__*/React.createElement(IntlMessages,{id:'toCountry'}),key:\"toCountry\",align:\"toCountry\",render:function render(text,record,index){return intlMessages({en:record.toCountry&&record.toCountry.nameEn,ru:record.toCountry&&record.toCountry.nameRu,uz:record.toCountry&&record.toCountry.nameUz});}}],currentItem:{},list:[],services:[],countries:[],pagination:{showSizeChanger:true,showQuickJumper:true,showTotal:function showTotal(total){return\"Total \".concat(total,\" Items\");},current:1,total:0,pageSize:20},file:null,addPoint:null};return _this;}_createClass(Certificates,[{key:\"componentDidMount\",value:function componentDidMount(){this.getInit();this.getClients();}},{key:\"render\",value:function render(){var _this2=this;if(this.state.addPoint!==null){return/*#__PURE__*/React.createElement(Redirect,{to:{pathname:\"/main/client/\".concat(this.state.addPoint),state:{id:this.state.addPoint}}});}var _this$state=this.state,currentItem=_this$state.currentItem,modalVisible=_this$state.modalVisible,countries=_this$state.countries,services=_this$state.services,file=_this$state.file,searchText=_this$state.searchText,columns=_this$state.columns,list=_this$state.list,actionType=_this$state.actionType,pagination=_this$state.pagination;return/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(Filter,{onAdd:this.onAdd,searchText:searchText,handleResetSearch:this.handleResetSearch,handleSubmitSearch:this.handleSubmitSearch,onChangeSearch:this.onChangeSearch}),/*#__PURE__*/React.createElement(List,{visibleColumns:columns,dataSource:list,onFinish:this.onFinish,addPoint:this.addPoint,onEditItem:this.onEditItem,pagination:pagination.total>=10?_objectSpread(_objectSpread({},pagination),{},{onChange:this.onChange,onShowSizeChange:this.onShowSizeChange}):false,onDeleteItem:this.onDelete}),/*#__PURE__*/React.createElement(FormModal,{onSubmit:this.onSubmit,onCancel:this.onCancel,onChangeFile:this.onChangeFile,file:file,countries:countries,modalVisible:modalVisible,services:services,actionType:actionType,currentItem:actionType==='create'?{}:currentItem}),this.state.fileModal&&this.state.fileModal.showModal&&/*#__PURE__*/React.createElement(Modal,{footer:null,width:800,visible:this.state.fileModal.showModal,onCancel:function onCancel(){return _this2.setState({fileModal:null});}},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{style:{textAlign:'center'}},/*#__PURE__*/React.createElement(\"span\",null,intlMessages({en:\"Sorry, no view\",ru:\"Извините, нет просмотра\",uz:\"Kechirasiz, ko'rinish yo'q\"}))),/*#__PURE__*/React.createElement(\"div\",{style:{textAlign:'center',marginTop:\"25px\"}},/*#__PURE__*/React.createElement(Button,{type:\"primary\",className:\"margin-right btn-sm\",onClick:function onClick(){return _this2.onDownloadFile(_this2.state.fileModal.fileId);},icon:\"cloud-download\"},/*#__PURE__*/React.createElement(IntlMessages,{id:\"download\"}))))));}}]);return Certificates;}(Component);export default Certificates;","map":{"version":3,"sources":["C:/Users/Ibrohim/Desktop/ark-front/src/routes/routesManagers/main/clients/index.js"],"names":["React","Component","Card","notification","Button","Modal","ApiRequest","api","Filter","FormModal","List","IntlMessages","intlMessages","Redirect","Icon","apiFileUrl","getClient","getClientFile","postClient","putClient","deleteClient","getService","getCountry","getClientFinish","searchClient","Certificates","props","onDownloadFile","fileId","path","then","result","success","a","document","createElement","href","object","body","appendChild","target","click","removeChild","getInit","setState","services","state","countries","_embedded","list","getClients","payload","pagination","total","totalElements","length","onRequestFunc","data","message","actionType","modalVisible","currentItem","file","key","messageSuccess","description","descriptionSuccess","error","messageError","descriptionError","onSubmit","en","ru","uz","id","onCancel","selectedFormLocale","languageId","locale","name","icon","onAdd","onDelete","dataItemId","onEditItem","dataItem","attachment","fileUrl","fileStatus","onChange","page","current","onShowSizeChange","size","pageSize","onChangeFile","addPoint","e","onFinish","onChangeSearch","text","searchText","handleResetSearch","handleSubmitSearch","word","fileModal","columns","title","align","width","render","record","index","contentType","showModal","dataIndex","serviceType","titleEn","titleRu","titleUz","dateOfAgreement","substring","fromCountry","nameEn","nameRu","nameUz","toCountry","showSizeChanger","showQuickJumper","showTotal","pathname","textAlign","marginTop"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { Card, notification } from \"antd/lib/index\";\r\nimport {Button, Modal} from \"antd\";\r\n\r\nimport ApiRequest from \"../../../../services\";\r\nimport api from '../../../../services/app'\r\nimport Filter from './components/Filter'\r\nimport FormModal from './components/Modal'\r\nimport List from './components/List'\r\nimport IntlMessages, { intlMessages } from \"../../../../util/IntlMessages\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport {Icon} from \"antd\";\r\nimport {apiFileUrl} from \"../../../../util/constants\";\r\n\r\nconst { getClient,getClientFile, postClient, putClient, deleteClient, getService, getCountry, getClientFinish,searchClient} = api;\r\n\r\nclass Certificates extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            actionType: 'create',\r\n            modalVisible: false,\r\n            searchText:\"\",\r\n          fileModal:null,\r\n          columns: [\r\n                {\r\n                    title: <strong>№</strong>,\r\n                    key: \"№\",\r\n                    align: \"center\",\r\n                    width: 60,\r\n                    render: (text, record, index) => index + 1,\r\n                },\r\n                {\r\n                    title: <IntlMessages id={'attachment'} />,\r\n                    key: \"file\",\r\n                    align: \"center\",\r\n                    width: 100,\r\n                    render: (text, record, index) => (\r\n                      record.attachment.contentType === \"application/pdf\"?\r\n                          <button className=\"bg-transparent border-0 mx-2\" onClick={()=>this.onDownloadFile(record.attachment.id)}><Icon type=\"eye\" /></button>:\r\n                          <button className=\"bg-transparent border-0 mx-2\" onClick={()=>{this.setState({fileModal:{showModal:true,fileId:record.attachment.id,file:record.attachment}})}}><Icon type=\"eye\" /></button>)\r\n\r\n                },\r\n                {\r\n                    title: <IntlMessages id={'companyName'} />,\r\n                    key: \"companyName\",\r\n                    align: \"center\",\r\n                    dataIndex: \"companyName\"\r\n                },\r\n                {\r\n                    title: <IntlMessages id={'companyStir'} />,\r\n                    key: \"companyStir\",\r\n                    align: \"center\",\r\n                    dataIndex: \"companyStir\"\r\n                },\r\n                {\r\n                    title: <IntlMessages id={'trackingNumber'} />,\r\n                    key: \"trackingNumber\",\r\n                    align: \"center\",\r\n                    dataIndex: \"trackingNumber\"\r\n                },\r\n                {\r\n                    title: <IntlMessages id={'serviceType'} />,\r\n                    key: \"serviceType\",\r\n                    align: \"center\",\r\n                    render: (text, record, index) => intlMessages({\r\n                        en: record.serviceType && record.serviceType.titleEn,\r\n                        ru: record.serviceType && record.serviceType.titleRu,\r\n                        uz: record.serviceType && record.serviceType.titleUz\r\n                    })\r\n                },\r\n                {\r\n                    title: <IntlMessages id={'date'} />,\r\n                    key: \"date\",\r\n                    align: \"center\",\r\n                    render: (text, record, index) => record.dateOfAgreement.substring(0, 10)\r\n                },\r\n                {\r\n                    title: <IntlMessages id={'fromCountry'} />,\r\n                    key: \"fromCountry\",\r\n                    align: \"center\",\r\n                    render: (text, record, index) => intlMessages({\r\n                        en: record.fromCountry && record.fromCountry.nameEn,\r\n                        ru: record.fromCountry && record.fromCountry.nameRu,\r\n                        uz: record.fromCountry && record.fromCountry.nameUz\r\n                    })\r\n                },\r\n                {\r\n                    title: <IntlMessages id={'toCountry'} />,\r\n                    key: \"toCountry\",\r\n                    align: \"toCountry\",\r\n                    render: (text, record, index) => intlMessages({\r\n                        en: record.toCountry && record.toCountry.nameEn,\r\n                        ru: record.toCountry && record.toCountry.nameRu,\r\n                        uz: record.toCountry && record.toCountry.nameUz\r\n                    })\r\n                },\r\n            ],\r\n            currentItem: {},\r\n            list: [],\r\n\r\n            services: [],\r\n            countries: [],\r\n            pagination: {\r\n                showSizeChanger: true,\r\n                showQuickJumper: true,\r\n                showTotal: total => `Total ${total} Items`,\r\n                current: 1,\r\n                total: 0,\r\n                pageSize: 20,\r\n            },\r\n            file: null,\r\n            addPoint: null\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.getInit();\r\n        this.getClients()\r\n    }\r\n\r\n  onDownloadFile=(fileId)=>{\r\n    ApiRequest(getClientFile,{path:fileId}).then((result)=>{\r\n      if (result.success){\r\n        let a = document.createElement(\"a\");\r\n        a.href = result.object;\r\n        document.body.appendChild(a);\r\n        a.target = \"_blank\";\r\n        a.click();\r\n        document.body.removeChild(a);\r\n      }\r\n    })\r\n\r\n  };\r\n\r\n    getInit = () => {\r\n        ApiRequest(getService).then((result) => {\r\n            if (result.success) {\r\n                this.setState({\r\n                    services: result.object\r\n                })\r\n            }\r\n        });\r\n        ApiRequest(getCountry).then((result => {\r\n            if (result.success) {\r\n                this.setState((state, props) => ({\r\n                    countries: result._embedded.list,\r\n                }));\r\n\r\n            }\r\n        }))\r\n    };\r\n\r\n    getClients = (payload) => {\r\n        ApiRequest(getClient, payload).then((result => {\r\n            if (result.success) {\r\n                this.setState((state,props)=>({\r\n                    list: result.object,\r\n                    pagination: {\r\n                        ...state.pagination,\r\n                        total: result.totalElements + '||' + result.object + '&&' + result.object.length,\r\n                    }\r\n                }))\r\n            }\r\n        }));\r\n    };\r\n\r\n    onRequestFunc = (path, data, message) => {\r\n        ApiRequest(path, data).then((result => {\r\n            if (result.success) {\r\n                this.setState({\r\n                    actionType: 'create',\r\n                    modalVisible: false,\r\n                    currentItem: {},\r\n                    file: null\r\n                });\r\n                notification.success({\r\n                    key: message.key,\r\n                    message: message.messageSuccess,\r\n                    description: message.descriptionSuccess,\r\n                });\r\n                this.getClients()\r\n            } else {\r\n                notification.error({\r\n                    key: message.key,\r\n                    message: message.messageError,\r\n                    description: message.descriptionError,\r\n                });\r\n            }\r\n        }))\r\n    };\r\n\r\n    onSubmit = (data) => {\r\n        let message = {};\r\n        if (this.state.actionType === \"create\") {\r\n            message = {\r\n                key: \"create\",\r\n                messageError: intlMessages({\r\n                    en: \"There was an error creating\",\r\n                    ru: \"Произошла ошибка при создании\",\r\n                    uz: \"Yaratishda xatolik yuz berdi\"\r\n                }),\r\n                messageSuccess: intlMessages({\r\n                    en: \"Successfully created\",\r\n                    ru: \"Успешно создан\",\r\n                    uz: \"Muvaffaqqiyatli yaratildi\"\r\n                }),\r\n            };\r\n            this.onRequestFunc(postClient, data, message)\r\n        }\r\n        if (this.state.actionType === \"update\") {\r\n            message = {\r\n                key: \"update\",\r\n                messageError: intlMessages({\r\n                    en: \"There was an error updating\",\r\n                    ru: \"Произошла ошибка при изменение\",\r\n                    uz: \"Tahrirlashda xatolik yuz berdi\"\r\n                }),\r\n                messageSuccess: intlMessages({\r\n                    en: \"Successfully updated\",\r\n                    ru: \"Успешно изменено\",\r\n                    uz: \"Muvaffaqqiyatli tahrirlandi\"\r\n                }),\r\n            };\r\n            this.onRequestFunc(putClient, {\r\n                id: this.state.currentItem.id, ...data\r\n            }, message)\r\n        }\r\n    };\r\n\r\n    onCancel = () => {\r\n        this.setState({\r\n                modalVisible: false,\r\n                actionType: 'create',\r\n                file: null,\r\n                selectedFormLocale: {\r\n                    languageId: 'nameEn',\r\n                    locale: 'en',\r\n                    name: 'English',\r\n                    icon: 'us',\r\n                }\r\n            }\r\n        )\r\n    };\r\n\r\n    onAdd = () => {\r\n        this.setState({ modalVisible: true, actionType: 'create' })\r\n    };\r\n\r\n    onDelete = (dataItemId) => {\r\n        let message = {\r\n            key: \"delete\",\r\n            messageError: intlMessages({\r\n                en: \"There was an error deleting\",\r\n                ru: \"Произошла ошибка при удалении\",\r\n                uz: \"O'chirishda xatolik yuz berdi\"\r\n            }),\r\n            messageSuccess: intlMessages({\r\n                en: \"Successfully deleted\",\r\n                ru: \"Успешно удален\",\r\n                uz: \"Muvaffaqiyatli o'chirildi\"\r\n            }),\r\n        };\r\n        this.onRequestFunc(deleteClient, { id: dataItemId }, message)\r\n    };\r\n\r\n    onEditItem = (dataItem) => {\r\n        this.setState({\r\n            actionType: \"update\",\r\n            currentItem: dataItem,\r\n            file: dataItem.attachment ? {\r\n                fileUrl: apiFileUrl + dataItem.attachment.id,\r\n                file: dataItem.attachment,\r\n                fileStatus: \"create\"\r\n            } : null,\r\n            modalVisible: true,\r\n        })\r\n    };\r\n\r\n    onChange = (page) => {\r\n        this.setState((state, props) => ({\r\n            pagination: {\r\n                ...state.pagination,\r\n                current: page\r\n            }\r\n        }));\r\n\r\n        this.getClients({ page: page - 1 });\r\n    };\r\n\r\n    onShowSizeChange = (current, size) => {\r\n        this.getClients({ page: current - 1, size: size });\r\n        this.setState((state, props) => ({\r\n            pagination: {\r\n                ...state.pagination,\r\n                current: current,\r\n                pageSize: size\r\n            }\r\n        }));\r\n    };\r\n\r\n    onChangeFile = (file) => {\r\n        this.setState({\r\n            file: file\r\n        })\r\n    };\r\n\r\n    addPoint = (e) => {\r\n        this.setState({\r\n            addPoint: e\r\n        })\r\n    };\r\n\r\n    onFinish = (dataItemId) => {\r\n        let message = {\r\n            key: \"update\",\r\n            messageError: intlMessages({\r\n                en: \"There was an error updating\",\r\n                ru: \"Произошла ошибка при изменение\",\r\n                uz: \"Tahrirlashda xatolik yuz berdi\"\r\n            }),\r\n            messageSuccess: intlMessages({\r\n                en: \"Successfully updated\",\r\n                ru: \"Успешно изменено\",\r\n                uz: \"Muvaffaqqiyatli tahrirlandi\"\r\n            }),\r\n        };\r\n        this.onRequestFunc(getClientFinish, { path: dataItemId }, message)\r\n    };\r\n\r\n    onChangeSearch = (text) => {\r\n        this.setState({\r\n            searchText: text\r\n        })\r\n    };\r\n\r\n    handleResetSearch = () => {\r\n        this.getClients();\r\n        this.setState({\r\n            searchText: \"\",\r\n        })\r\n    };\r\n\r\n    handleSubmitSearch = (text) => {\r\n        ApiRequest(searchClient, { word: this.state.searchText }).then((result) => {\r\n            if (result.success) {\r\n                this.setState({\r\n                    list: result.object,\r\n                })\r\n            }\r\n        })\r\n    };\r\n\r\n    render() {\r\n      if (this.state.addPoint !== null) {\r\n            return <Redirect to={{\r\n                pathname: `/main/client/${this.state.addPoint}`,\r\n                state: { id: this.state.addPoint }\r\n            }} />\r\n        }\r\n\r\n        const { currentItem, modalVisible, countries, services, file, searchText, columns, list, actionType, pagination } = this.state;\r\n        return (\r\n            <Card>\r\n                <Filter onAdd={this.onAdd}\r\n                        searchText={searchText}\r\n                        handleResetSearch={this.handleResetSearch}\r\n                        handleSubmitSearch={this.handleSubmitSearch}\r\n                        onChangeSearch={this.onChangeSearch}\r\n                />\r\n                <List visibleColumns={columns}\r\n                      dataSource={list}\r\n                      onFinish={this.onFinish}\r\n                      addPoint={this.addPoint}\r\n                      onEditItem={this.onEditItem}\r\n                      pagination={pagination.total >= 10 ? {\r\n                          ...pagination,\r\n                          onChange: this.onChange,\r\n                          onShowSizeChange: this.onShowSizeChange\r\n                      } : false}\r\n                      onDeleteItem={this.onDelete} />\r\n                <FormModal\r\n                    onSubmit={this.onSubmit}\r\n                    onCancel={this.onCancel}\r\n                    onChangeFile={this.onChangeFile}\r\n                    file={file}\r\n                    countries={countries}\r\n                    modalVisible={modalVisible}\r\n                    services={services}\r\n                    actionType={actionType}\r\n                    currentItem={actionType === 'create' ? {} : currentItem}\r\n                />\r\n              {this.state.fileModal && this.state.fileModal.showModal && (\r\n                <Modal\r\n                  footer={null}\r\n                  width={800}\r\n                  visible={this.state.fileModal.showModal}\r\n                  onCancel={() => this.setState({fileModal:null})}\r\n                >\r\n                  <div>\r\n                    <div style={{textAlign:'center'}}>\r\n                   <span>\r\n                      {\r\n                        intlMessages({en:\"Sorry, no view\",ru:\"Извините, нет просмотра\",uz:\"Kechirasiz, ko'rinish yo'q\"})\r\n                      }\r\n                   </span>\r\n\r\n                    </div>\r\n                    <div  style={{textAlign:'center',marginTop:\"25px\"}}>\r\n                      <Button type=\"primary\"\r\n                              className=\"margin-right btn-sm\"\r\n                              onClick={()=>this.onDownloadFile(this.state.fileModal.fileId)}\r\n                              icon=\"cloud-download\">\r\n                        <IntlMessages id=\"download\"/>\r\n                      </Button>\r\n                    </div>\r\n                  </div>\r\n                </Modal>\r\n              )}\r\n            </Card>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Certificates;\r\n"]},"metadata":{},"sourceType":"module"}