{"ast":null,"code":"import _objectSpread from\"C:\\\\Users\\\\Ibrohim\\\\Desktop\\\\ark-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"C:\\\\Users\\\\Ibrohim\\\\Desktop\\\\ark-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\Ibrohim\\\\Desktop\\\\ark-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\Ibrohim\\\\Desktop\\\\ark-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\Ibrohim\\\\Desktop\\\\ark-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{Card,Input,notification}from\"antd\";import ApiRequest from\"../../../../../services\";import api from'../../../../../services/app';import Filter from'./components/Filter';import Modal from'./components/Modal';import List from'./components/List';import IntlMessages,{intlMessages}from\"../../../../../util/IntlMessages\";var getDistrict=api.getDistrict,postDistrict=api.postDistrict,deleteDistrict=api.deleteDistrict,getRegionList=api.getRegionList,searchDistrict=api.searchDistrict;var District=/*#__PURE__*/function(_Component){_inherits(District,_Component);var _super=_createSuper(District);function District(props){var _this;_classCallCheck(this,District);_this=_super.call(this,props);_this.onStartEvent=function(payload){ApiRequest(getDistrict,payload).then(function(result){if(result.success){_this.setState(function(state,props){return{list:result.object,pagination:_objectSpread(_objectSpread({},state.pagination),{},{total:result.totalElements||result.object.length})};});}});_this.getRegion();};_this.getRegion=function(){ApiRequest(getRegionList).then(function(result){if(result.success){_this.setState({regions:result.object});}});};_this.onRequestFunc=function(path,data,message){ApiRequest(path,data).then(function(result){if(result.success){_this.setState({actionType:'create',modalVisible:false,currentItem:{}});notification.success({key:message.key,message:message.messageSuccess,description:message.descriptionSuccess});_this.onStartEvent();}else{notification.error({key:message.key,message:message.messageError,description:message.descriptionError});}});};_this.onSubmit=function(data){var message={};if(_this.state.actionType===\"create\"){message={key:\"create\",messageError:intlMessages({en:\"There was an error creating\",ru:\"Произошла ошибка при создании\",uz:\"Yaratishda xatolik yuz berdi\"}),messageSuccess:intlMessages({en:\"Successfully created\",ru:\"Успешно создан\",uz:\"Muvaffaqqiyatli yaratildi\"})};_this.onRequestFunc(postDistrict,data,message);}if(_this.state.actionType===\"update\"){message={key:\"update\",messageError:intlMessages({en:\"There was an error updating\",ru:\"Произошла ошибка при изменение\",uz:\"Tahrirlashda xatolik yuz berdi\"}),messageSuccess:intlMessages({en:\"Successfully updated\",ru:\"Успешно изменено\",uz:\"Muvaffaqqiyatli tahrirlandi\"})};_this.onRequestFunc(postDistrict,data,message);}};_this.onCancel=function(){_this.setState({modalVisible:false,actionType:'create'});};_this.onAdd=function(){_this.setState({modalVisible:true,actionType:'create'});};_this.onDelete=function(dataItemId){var message={key:\"delete\",messageError:intlMessages({en:\"There was an error deleting\",ru:\"Произошла ошибка при удалении\",uz:\"O'chirishda xatolik yuz berdi\"}),messageSuccess:intlMessages({en:\"Successfully deleted\",ru:\"Успешно удален\",uz:\"Muvaffaqiyatli o'chirildi\"})};_this.onRequestFunc(deleteDistrict,{id:dataItemId},message);};_this.onEditItem=function(dataItem){_this.setState({actionType:\"update\",currentItem:dataItem,modalVisible:true});};_this.onChange=function(page){_this.setState(function(state,props){return{pagination:_objectSpread(_objectSpread({},state.pagination),{},{current:page})};});_this.onStartEvent({page:page-1});};_this.onShowSizeChange=function(current,size){_this.onStartEvent({page:current-1,size:size});_this.setState(function(state,props){return{pagination:_objectSpread(_objectSpread({},state.pagination),{},{current:current,pageSize:size})};});};_this.onChangeSearch=function(text){_this.setState({searchText:text});};_this.handleResetSearch=function(){_this.onStartEvent({page:0,size:20});_this.setState({searchText:\"\"});};_this.handleSubmitSearch=function(){ApiRequest(searchDistrict,{word:_this.state.searchText}).then(function(result){if(result.success){_this.setState({list:result.object});}});};_this.state={actionType:'create',modalVisible:false,searchText:\"\",columns:[{title:/*#__PURE__*/React.createElement(\"strong\",null,\"\\u2116\"),key:\"№\",width:60,align:\"center\",render:function render(text,record,index){return index+1;}},intlMessages({en:{title:\"District\",dataIndex:'nameEn',key:'nameEn'},ru:{title:\"Район\",dataIndex:'nameRu',key:'nameRu'},uz:{title:\"Tumanlar\",dataIndex:'nameUz',key:'nameUz'}})],formItems:[{label:\"English\",name:'nameEn',rules:[{required:true,message:/*#__PURE__*/React.createElement(IntlMessages,{id:\"E_ERROR\"})}],obj:/*#__PURE__*/React.createElement(Input,null)},{label:\"Русский\",name:'nameRu',rules:[{required:true,message:/*#__PURE__*/React.createElement(IntlMessages,{id:\"E_ERROR\"})}],obj:/*#__PURE__*/React.createElement(Input,null)},{label:\"O'zbek\",name:'nameUz',rules:[{required:true,message:/*#__PURE__*/React.createElement(IntlMessages,{id:\"E_ERROR\"})}],obj:/*#__PURE__*/React.createElement(Input,null)}],currentItem:{},list:[],pagination:{showSizeChanger:true,showQuickJumper:true,showTotal:function showTotal(total){return\"Total \".concat(total,\" Items\");},current:1,total:0,pageSize:20},regions:[]};return _this;}_createClass(District,[{key:\"componentDidMount\",value:function componentDidMount(){this.onStartEvent({page:0,size:20});}},{key:\"render\",value:function render(){var _this$state=this.state,currentItem=_this$state.currentItem,modalVisible=_this$state.modalVisible,searchText=_this$state.searchText,columns=_this$state.columns,formItems=_this$state.formItems,list=_this$state.list,actionType=_this$state.actionType,pagination=_this$state.pagination,regions=_this$state.regions;return/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(Filter,{searchText:searchText,handleResetSearch:this.handleResetSearch,handleSubmitSearch:this.handleSubmitSearch,onChangeSearch:this.onChangeSearch,onAdd:this.onAdd}),/*#__PURE__*/React.createElement(List,{visibleColumns:columns,dataSource:list,onEditItem:this.onEditItem,pagination:pagination.total>=10?_objectSpread(_objectSpread({},pagination),{},{onChange:this.onChange,onShowSizeChange:this.onShowSizeChange}):false,onDeleteItem:this.onDelete}),/*#__PURE__*/React.createElement(Modal,{onSubmit:this.onSubmit,onCancel:this.onCancel,regions:regions,actionType:actionType,modalVisible:modalVisible,currentItem:actionType==='create'?{}:currentItem,formItems:formItems}));}}]);return District;}(Component);export default District;","map":{"version":3,"sources":["C:/Users/Ibrohim/Desktop/ark-front/src/routes/routesManagers/settings/dictionary/district/index.js"],"names":["React","Component","Card","Input","notification","ApiRequest","api","Filter","Modal","List","IntlMessages","intlMessages","getDistrict","postDistrict","deleteDistrict","getRegionList","searchDistrict","District","props","onStartEvent","payload","then","result","success","setState","state","list","object","pagination","total","totalElements","length","getRegion","regions","onRequestFunc","path","data","message","actionType","modalVisible","currentItem","key","messageSuccess","description","descriptionSuccess","error","messageError","descriptionError","onSubmit","en","ru","uz","onCancel","onAdd","onDelete","dataItemId","id","onEditItem","dataItem","onChange","page","current","onShowSizeChange","size","pageSize","onChangeSearch","text","searchText","handleResetSearch","handleSubmitSearch","word","columns","title","width","align","render","record","index","dataIndex","formItems","label","name","rules","required","obj","showSizeChanger","showQuickJumper","showTotal"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\r\nimport {Card, Input, notification} from \"antd\";\r\nimport ApiRequest from \"../../../../../services\";\r\nimport api from '../../../../../services/app'\r\nimport Filter from './components/Filter'\r\nimport Modal from './components/Modal'\r\nimport List from './components/List'\r\nimport IntlMessages, {intlMessages} from \"../../../../../util/IntlMessages\";\r\n\r\nconst {getDistrict, postDistrict, deleteDistrict,getRegionList,searchDistrict} = api;\r\n\r\nclass District extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      actionType: 'create',\r\n      modalVisible: false,\r\n      searchText:\"\",\r\n      columns: [{\r\n        title: <strong>№</strong>,\r\n        key: \"№\",\r\n        width: 60,\r\n        align: \"center\",\r\n        render: (text, record, index) => index + 1,\r\n      },\r\n        (intlMessages({\r\n          en: {\r\n            title: \"District\",\r\n            dataIndex: 'nameEn',\r\n            key: 'nameEn'\r\n          }, ru: {\r\n            title: \"Район\",\r\n            dataIndex: 'nameRu',\r\n            key: 'nameRu'\r\n          },\r\n          uz: {\r\n            title: \"Tumanlar\",\r\n            dataIndex: 'nameUz',\r\n            key: 'nameUz'\r\n          }\r\n        }))\r\n\r\n      ],\r\n      formItems: [\r\n        {\r\n          label: \"English\",\r\n          name: 'nameEn',\r\n          rules: [\r\n            {\r\n              required: true,\r\n              message: <IntlMessages id=\"E_ERROR\"/>\r\n\r\n            },\r\n          ],\r\n          obj: <Input/>\r\n        },\r\n        {\r\n          label: \"Русский\",\r\n          name: 'nameRu',\r\n          rules: [\r\n            {\r\n              required: true,\r\n              message: <IntlMessages id=\"E_ERROR\"/>\r\n\r\n            },\r\n          ],\r\n          obj: <Input/>\r\n        },\r\n\r\n        {\r\n          label: \"O'zbek\",\r\n          name: 'nameUz',\r\n          rules: [\r\n            {\r\n              required: true,\r\n              message: <IntlMessages id=\"E_ERROR\"/>\r\n            },\r\n          ],\r\n          obj: <Input/>\r\n        },\r\n      ],\r\n      currentItem: {},\r\n      list: [],\r\n      pagination: {\r\n        showSizeChanger: true,\r\n        showQuickJumper: true,\r\n        showTotal: total => `Total ${total} Items`,\r\n        current: 1,\r\n        total: 0,\r\n        pageSize: 20,\r\n      },\r\n      regions:[]\r\n\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.onStartEvent(\r\n      {\r\n        page: 0,\r\n        size: 20\r\n      }\r\n    )\r\n  }\r\n\r\n  onStartEvent = (payload) => {\r\n    ApiRequest(getDistrict, payload).then((result => {\r\n      if (result.success) {\r\n        this.setState((state, props) => ({\r\n          list: result.object,\r\n          pagination: {\r\n            ...state.pagination,\r\n            total: result.totalElements || result.object.length,\r\n          }\r\n        }));\r\n\r\n      }\r\n    }));\r\n    this.getRegion();\r\n  };\r\n  getRegion=()=>{\r\n    ApiRequest(getRegionList).then((result)=>{\r\n     if (result.success){\r\n       this.setState({\r\n         regions:result.object\r\n       })\r\n     }\r\n    })\r\n  };\r\n\r\n\r\n  onRequestFunc = (path, data, message) => {\r\n    ApiRequest(path, data).then((result => {\r\n      if (result.success) {\r\n        this.setState({\r\n          actionType: 'create',\r\n          modalVisible: false,\r\n          currentItem: {},\r\n        });\r\n        notification.success({\r\n          key: message.key,\r\n          message: message.messageSuccess,\r\n          description: message.descriptionSuccess,\r\n        });\r\n        this.onStartEvent()\r\n      } else {\r\n        notification.error({\r\n          key: message.key,\r\n          message: message.messageError,\r\n          description: message.descriptionError,\r\n        });\r\n      }\r\n    }))\r\n  };\r\n\r\n\r\n  onSubmit = (data) => {\r\n    let message = {};\r\n    if (this.state.actionType === \"create\") {\r\n      message = {\r\n        key: \"create\",\r\n\r\n        messageError: intlMessages({en:\"There was an error creating\",ru:\"Произошла ошибка при создании\",uz:\"Yaratishda xatolik yuz berdi\"}),\r\n        messageSuccess: intlMessages({en:\"Successfully created\",ru:\"Успешно создан\",uz:\"Muvaffaqqiyatli yaratildi\"}),\r\n      };\r\n      this.onRequestFunc(postDistrict, data, message)\r\n    }\r\n    if (this.state.actionType === \"update\") {\r\n      message = {\r\n        key: \"update\",\r\n\r\n        messageError: intlMessages({en:\"There was an error updating\",ru:\"Произошла ошибка при изменение\",uz:\"Tahrirlashda xatolik yuz berdi\"}),\r\n        messageSuccess: intlMessages({en:\"Successfully updated\",ru:\"Успешно изменено\",uz:\"Muvaffaqqiyatli tahrirlandi\"}),\r\n      };\r\n      this.onRequestFunc(postDistrict, data, message)\r\n    }\r\n  };\r\n  onCancel = () => {\r\n    this.setState({modalVisible: false, actionType: 'create'})\r\n  };\r\n  onAdd = () => {\r\n    this.setState({modalVisible: true, actionType: 'create'})\r\n  };\r\n  onDelete = (dataItemId) => {\r\n    let message = {\r\n      key: \"delete\",\r\n\r\n      messageError: intlMessages({en:\"There was an error deleting\",ru:\"Произошла ошибка при удалении\",uz:\"O'chirishda xatolik yuz berdi\"}),\r\n      messageSuccess: intlMessages({en:\"Successfully deleted\",ru:\"Успешно удален\",uz:\"Muvaffaqiyatli o'chirildi\"}),\r\n    };\r\n    this.onRequestFunc(deleteDistrict, {id: dataItemId}, message)\r\n  };\r\n  onEditItem = (dataItem) => {\r\n    this.setState({\r\n      actionType: \"update\",\r\n      currentItem: dataItem,\r\n      modalVisible: true,\r\n    })\r\n  };\r\n\r\n  onChange = (page) => {\r\n    this.setState((state, props) => ({\r\n      pagination: {\r\n        ...state.pagination,\r\n        current:page\r\n      }\r\n    }));\r\n    this.onStartEvent({page:page-1});\r\n  };\r\n  onShowSizeChange = (current, size) => {\r\n    this.onStartEvent({page:current-1,size:size});\r\n    this.setState((state, props) => ({\r\n      pagination: {\r\n        ...state.pagination,\r\n        current:current,\r\n        pageSize:size\r\n      }\r\n    }));\r\n  };\r\n\r\n  onChangeSearch = (text) => {\r\n    this.setState({\r\n      searchText: text\r\n    })\r\n  };\r\n\r\n  handleResetSearch = () => {\r\n    this.onStartEvent(\r\n        {\r\n          page: 0,\r\n          size: 20\r\n        }\r\n    );\r\n    this.setState({\r\n      searchText: \"\",\r\n    })\r\n  };\r\n\r\n  handleSubmitSearch = () => {\r\n    ApiRequest(searchDistrict, {word: this.state.searchText}).then((result) => {\r\n      if (result.success) {\r\n        this.setState({\r\n          list: result.object,\r\n        })\r\n      }\r\n    })\r\n  };\r\n\r\n  render() {\r\n    const {currentItem, modalVisible,searchText, columns, formItems, list, actionType, pagination,regions} = this.state;\r\n\r\n    return (\r\n      <Card>\r\n        <Filter\r\n            searchText={searchText}\r\n            handleResetSearch={this.handleResetSearch}\r\n            handleSubmitSearch={this.handleSubmitSearch}\r\n            onChangeSearch={this.onChangeSearch}\r\n            onAdd={this.onAdd}/>\r\n        <List visibleColumns={columns}\r\n              dataSource={list}\r\n              onEditItem={this.onEditItem}\r\n              pagination={pagination.total >= 10 ? {\r\n                ...pagination,\r\n                onChange: this.onChange,\r\n                onShowSizeChange: this.onShowSizeChange\r\n              } : false}\r\n              onDeleteItem={this.onDelete}/>\r\n        <Modal\r\n          onSubmit={this.onSubmit}\r\n          onCancel={this.onCancel}\r\n          regions={regions}\r\n          actionType={actionType}\r\n          modalVisible={modalVisible}\r\n          currentItem={actionType === 'create' ? {} : currentItem}\r\n          formItems={formItems}\r\n        />\r\n      </Card>\r\n    );\r\n  }\r\n}\r\n\r\n\r\n\r\n\r\nexport default District;\r\n"]},"metadata":{},"sourceType":"module"}