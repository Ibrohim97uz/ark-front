{"ast":null,"code":"import _objectSpread from\"C:\\\\Users\\\\Ibrohim\\\\Desktop\\\\ark-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import React,{Fragment}from'react';import{Form,Modal,Popover,Row,Col,message,Switch}from'antd';import{FileUpload,MultipleFileUpload,MultipleFileVideoUpload}from'../../../../../components/CustomComponents';import{convertToRaw}from\"draft-js\";import IntlMessages,{intlMessages}from\"../../../../../util/IntlMessages\";import config from\"../../../../../util/config\";import draftToHtml from\"draftjs-to-html\";import Editor from\"../../../../../components/WYSISWYG\";var locales=config.locales;var FormItem=Form.Item;var formItemLayout={labelCol:{xs:24,justify:\"center\"},wrapperCol:{justify:\"center\",xs:24}};var ColProps={xs:24,sm:24,md:24,xl:24,ld:24};var ColProp2={xs:24,sm:24,md:8,xl:8,ld:8};var modal=function modal(_ref){var currentItem=_ref.currentItem,onFormLocale=_ref.onFormLocale,onSubmit=_ref.onSubmit,onCancel=_ref.onCancel,file=_ref.file,files=_ref.files,videos=_ref.videos,text=_ref.text,onChangeFile=_ref.onChangeFile,onChangeAnyFile=_ref.onChangeAnyFile,onChangeAnyFileVideo=_ref.onChangeAnyFileVideo,modalVisible=_ref.modalVisible,onTextChange=_ref.onTextChange,formItems=_ref.formItems,selectedFormLocale=_ref.selectedFormLocale,actionType=_ref.actionType,_ref$form=_ref.form,getFieldDecorator=_ref$form.getFieldDecorator,validateFields=_ref$form.validateFields,getFieldsValue=_ref$form.getFieldsValue;var handleOk=function handleOk(){validateFields(function(errors){if(errors||file==null||file.file==null||text.en===\"\"){for(var i in errors){if(i===\"titleEn\"||i===\"textEn\"){return onFormLocale(locales[0]);}}if(text&&text.en===\"\"){message.error(intlMessages({en:\"The problem with the text!\",ru:\"Проблема с текстом!\",uz:\"Matn bilan bog'liq muammo!\"}));}if(file===null||file.file==null){message.error(intlMessages({en:\"File problem!\",ru:\"Проблема с файлом!\",uz:\"Fayl bilan bog'liq muammo!\"}));}return;}var formData=getFieldsValue();var currentFileList=[];formData['titleRu']=formData['titleRu']===undefined?formData['titleEn']:formData['titleRu'];formData['titleUz']=formData['titleUz']===undefined?formData['titleEn']:formData['titleUz'];formData['textEn']=draftToHtml(convertToRaw(text.en.getCurrentContent()));formData['textRu']=text.ru===\"\"?formData['textEn']:draftToHtml(convertToRaw(text.ru.getCurrentContent()));formData['textUz']=text.uz===\"\"?formData['textEn']:draftToHtml(convertToRaw(text.uz.getCurrentContent()));formData['isStatus']=formData['isStatus']===undefined?true:formData['isStatus'];formData['fileUpload']=true;formData['type']=true;formData['otherAttachmentId']=[];formData['files']=[];formData['videosId']=[];formData['videos']=[];if(actionType===\"create\"){if(files.length!==0){files.map(function(item){if(item.fileStatus===\"update\"){return formData['files'].push(item);}return item;});}if(videos!==0){videos.map(function(item){if(item.fileStatus===\"update\"){return formData['videos'].push(item);}return item;});}}if(actionType===\"update\"){formData['id']=currentItem.id;if(files.length!==0){files.map(function(item){if(item.fileStatus===\"create\"){return formData['otherAttachmentId'].push(item.file.id);}if(item.fileStatus===\"update\"){return formData['files'].push(item);}return item;});}if(videos.length!==0){videos.map(function(item){if(item.fileStatus===\"create\"){return formData['videosId'].push(item.file.id);}if(item.fileStatus===\"update\"){return formData['videos'].push(item);}return item;});}}if(file&&file.fileStatus===\"update\"){currentFileList.push({name:\"mainFile\",file:file.file});}if(file&&file.fileStatus===\"create\"){formData['mainAttachmentId']=currentItem.mainAttachment.id;currentFileList.push({name:\"mainFile\",file:{}});}if(file&&file.fileStatus===\"delete\"){currentFileList.push({name:\"mainFile\",file:{}});}currentFileList.push({name:\"file1\",file:formData['files'][0]?{0:formData['files'][0].file}:{}});currentFileList.push({name:\"file2\",file:formData['files'][1]?{0:formData['files'][1].file}:{}});currentFileList.push({name:\"file3\",file:formData['files'][2]?{0:formData['files'][2].file}:{}});currentFileList.push({name:\"video1\",file:formData['videos'][0]?{0:formData['videos'][0].file}:{}});currentFileList.push({name:\"video2\",file:formData['videos'][1]?{0:formData['videos'][1].file}:{}});currentFileList.push({name:\"video3\",file:formData['videos'][2]?{0:formData['videos'][2].file}:{}});formData['file']=currentFileList;onSubmit(formData);});};var dynamicFormItems=formItems.map(function(formItem){return/*#__PURE__*/React.createElement(Col,Object.assign({},ColProps,{key:formItem.name,hidden:!(formItem.locale===null||formItem.locale===selectedFormLocale.locale)}),/*#__PURE__*/React.createElement(FormItem,Object.assign({label:/*#__PURE__*/React.createElement(Fragment,null,formItem.locale!==null&&/*#__PURE__*/React.createElement(\"i\",{className:\"vertical-align-middle icon icon-check-circle-o mr-1\"}),formItem.label),className:\"mb-0 \",hasFeedback:true},formItemLayout),getFieldDecorator(formItem.name,_objectSpread({initialValue:currentItem[formItem.name]},formItem))(formItem.obj)));});var languageMenu=function languageMenu(){return/*#__PURE__*/React.createElement(\"div\",{className:\"gx-popover-lang-scroll overflow-hidden\"},/*#__PURE__*/React.createElement(\"ul\",{className:\"gx-sub-popover\"},locales.map(function(language){return/*#__PURE__*/React.createElement(\"li\",{className:\"gx-media gx-pointer\",key:JSON.stringify(language),onClick:function onClick(e){return onFormLocale(language);}},/*#__PURE__*/React.createElement(\"i\",{className:\"flag flag-24 gx-mr-2 flag-\".concat(language.icon)}),/*#__PURE__*/React.createElement(\"span\",{className:\"gx-language-text\"},language.name));})));};var onEditorChange=function onEditorChange(e){onTextChange(e);};return/*#__PURE__*/React.createElement(Modal,{visible:modalVisible,title:actionType===\"create\"?intlMessages({en:\"Create new service\",ru:\"Создать новый сервис\",uz:\"Yangi xizmat yaratish\"}):intlMessages({en:\"Update service\",ru:\"Изменить сервис\",uz:\"Xizmatni tahrirlash\"}),onOk:handleOk,bodyStyle:{height:550,overflowY:\"auto\"},destroyOnClose:true,width:900,style:{top:20},onCancel:onCancel,cancelText:/*#__PURE__*/React.createElement(IntlMessages,{id:'cancel'}),okText:/*#__PURE__*/React.createElement(IntlMessages,{id:'save'})},/*#__PURE__*/React.createElement(Form,{layout:\"horizontal\"},/*#__PURE__*/React.createElement(Row,{gutter:24},/*#__PURE__*/React.createElement(Col,{span:24},/*#__PURE__*/React.createElement(\"div\",{className:\"#\"},/*#__PURE__*/React.createElement(\"ul\",{className:\"gx-header-notifications gx-ml-auto\"},/*#__PURE__*/React.createElement(\"li\",{className:\"gx-language\"},/*#__PURE__*/React.createElement(Popover,{overlayClassName:\"gx-popover-horizantal\",placement:\"bottomRight\",content:languageMenu(),trigger:\"click\"},/*#__PURE__*/React.createElement(\"span\",{className:\"gx-pointer gx-flex-row gx-align-items-center\"},/*#__PURE__*/React.createElement(\"i\",{className:\"flag flag-24 flag-\".concat(selectedFormLocale.icon)}),/*#__PURE__*/React.createElement(\"span\",{className:'gx-pl-2'},selectedFormLocale.name),/*#__PURE__*/React.createElement(\"i\",{className:'icon icon-chevron-down gx-pl-2 d-block'}))))))),dynamicFormItems,/*#__PURE__*/React.createElement(Editor,{title:\"field.text\",text:text[selectedFormLocale['locale']],onEditorChange:onEditorChange}),/*#__PURE__*/React.createElement(Col,ColProps,/*#__PURE__*/React.createElement(FormItem,Object.assign({key:\"isStatus\",className:\"mb-0\",label:/*#__PURE__*/React.createElement(IntlMessages,{id:\"status\"}),hasFeedback:true},formItemLayout),getFieldDecorator('isStatus',{initialValue:actionType===\"create\"?true:currentItem&&currentItem.isStatus,valuePropName:\"checked\"})(/*#__PURE__*/React.createElement(Switch,null)))),/*#__PURE__*/React.createElement(FileUpload,{name:\"main-img\",title:/*#__PURE__*/React.createElement(IntlMessages,{id:\"mainFile\"}),types:[\"image/jpeg\",\"image/png\",\"image/jpg\"],size:50,file:file,onChangeFile:onChangeFile,formItemLayout:formItemLayout,colLayout:ColProps}),/*#__PURE__*/React.createElement(MultipleFileUpload,{name:\"other-img\",files:files,types:[\"image/jpeg\",\"image/png\",\"image/jpg\"],size:50,fileUploadCount:3,title:/*#__PURE__*/React.createElement(IntlMessages,{id:\"otherImg\"}),formItemLayout:formItemLayout,colLayout:ColProp2,onChangeFile:onChangeAnyFile}),/*#__PURE__*/React.createElement(MultipleFileVideoUpload,{name:\"videos\",files:videos,types:[\"video/mp4\",\"video/webm\",\"video/ogg\"],size:500,fileUploadCount:3,title:/*#__PURE__*/React.createElement(IntlMessages,{id:\"video\"}),formItemLayout:formItemLayout,colLayout:ColProp2,onChangeFile:onChangeAnyFileVideo}))));};export default Form.create()(modal);","map":{"version":3,"sources":["C:/Users/Ibrohim/Desktop/ark-front/src/routes/routesManagers/settings/services/components/Modal.js"],"names":["React","Fragment","Form","Modal","Popover","Row","Col","message","Switch","FileUpload","MultipleFileUpload","MultipleFileVideoUpload","convertToRaw","IntlMessages","intlMessages","config","draftToHtml","Editor","locales","FormItem","Item","formItemLayout","labelCol","xs","justify","wrapperCol","ColProps","sm","md","xl","ld","ColProp2","modal","currentItem","onFormLocale","onSubmit","onCancel","file","files","videos","text","onChangeFile","onChangeAnyFile","onChangeAnyFileVideo","modalVisible","onTextChange","formItems","selectedFormLocale","actionType","form","getFieldDecorator","validateFields","getFieldsValue","handleOk","errors","en","i","error","ru","uz","formData","currentFileList","undefined","getCurrentContent","length","map","item","fileStatus","push","id","name","mainAttachment","dynamicFormItems","formItem","locale","label","initialValue","obj","languageMenu","language","JSON","stringify","e","icon","onEditorChange","height","overflowY","top","isStatus","valuePropName","create"],"mappings":"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","sourcesContent":["import React, { Fragment } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { Form, Modal, Popover, Row, Col, message, Switch } from 'antd'\r\nimport { FileUpload, MultipleFileUpload, MultipleFileVideoUpload } from '../../../../../components/CustomComponents'\r\nimport { convertToRaw } from \"draft-js\";\r\n\r\nimport IntlMessages, { intlMessages } from \"../../../../../util/IntlMessages\";\r\nimport config from \"../../../../../util/config\";\r\nimport draftToHtml from \"draftjs-to-html\";\r\nimport Editor from \"../../../../../components/WYSISWYG\";\r\n\r\n\r\nconst { locales } = config;\r\nconst FormItem = Form.Item;\r\nconst formItemLayout = {\r\n    labelCol: {\r\n        xs: 24,\r\n        justify: \"center\"\r\n    },\r\n    wrapperCol: {\r\n        justify: \"center\",\r\n        xs: 24,\r\n    },\r\n};\r\nconst ColProps = {\r\n    xs: 24,\r\n    sm: 24,\r\n    md: 24,\r\n    xl: 24,\r\n    ld: 24\r\n};\r\n\r\nconst ColProp2 = {\r\n    xs: 24,\r\n    sm: 24,\r\n    md: 8,\r\n    xl: 8,\r\n    ld: 8\r\n};\r\n\r\n\r\nconst modal = ({\r\n                   currentItem,\r\n                   onFormLocale,\r\n                   onSubmit,\r\n                   onCancel,\r\n                   file,\r\n                   files,\r\n                   videos,\r\n                   text,\r\n                   onChangeFile,\r\n                   onChangeAnyFile,\r\n                   onChangeAnyFileVideo,\r\n                   modalVisible,\r\n                   onTextChange,\r\n                   formItems,\r\n                   selectedFormLocale,\r\n                   actionType,\r\n                   form: {\r\n                       getFieldDecorator,\r\n                       validateFields,\r\n                       getFieldsValue,\r\n                   },\r\n               }) => {\r\n\r\n    const handleOk = () => {\r\n        validateFields((errors) => {\r\n            if (errors || file == null || file.file == null || text.en === \"\") {\r\n                for (let i in errors) {\r\n                    if (i === \"titleEn\" || i === \"textEn\") {\r\n                        return onFormLocale(locales[0])\r\n                    }\r\n                }\r\n\r\n                if (text && text.en === \"\") {\r\n                    message.error(intlMessages({\r\n                        en: \"The problem with the text!\",\r\n                        ru: \"Проблема с текстом!\",\r\n                        uz: \"Matn bilan bog'liq muammo!\"\r\n                    }));\r\n                }\r\n\r\n                if (file === null || file.file == null) {\r\n                    message.error(intlMessages({\r\n                        en: \"File problem!\",\r\n                        ru: \"Проблема с файлом!\",\r\n                        uz: \"Fayl bilan bog'liq muammo!\"\r\n                    }));\r\n                }\r\n\r\n                return;\r\n            }\r\n            let formData = getFieldsValue();\r\n            let currentFileList = [];\r\n            formData['titleRu'] = formData['titleRu'] === undefined ? formData['titleEn'] : formData['titleRu'];\r\n            formData['titleUz'] = formData['titleUz'] === undefined ? formData['titleEn'] : formData['titleUz'];\r\n            formData['textEn'] = draftToHtml(convertToRaw(text.en.getCurrentContent()));\r\n            formData['textRu'] = text.ru === \"\" ? formData['textEn'] : draftToHtml(convertToRaw(text.ru.getCurrentContent()));\r\n            formData['textUz'] = text.uz === \"\" ? formData['textEn'] : draftToHtml(convertToRaw(text.uz.getCurrentContent()));\r\n            formData['isStatus'] = formData['isStatus'] === undefined ? true : formData['isStatus'];\r\n\r\n            formData['fileUpload'] = true;\r\n            formData['type'] = true;\r\n            formData['otherAttachmentId'] = [];\r\n            formData['files'] = [];\r\n            formData['videosId'] = [];\r\n            formData['videos'] = [];\r\n            if (actionType === \"create\") {\r\n                if (files.length !== 0) {\r\n                    files.map((item) => {\r\n                        if (item.fileStatus === \"update\") {\r\n                            return formData['files'].push(item)\r\n                        }\r\n                        return item;\r\n                    });\r\n                }\r\n                if (videos !== 0) {\r\n                    videos.map((item) => {\r\n                        if (item.fileStatus === \"update\") {\r\n                            return formData['videos'].push(item)\r\n                        }\r\n                        return item;\r\n                    })\r\n                }\r\n            }\r\n            if (actionType === \"update\") {\r\n                formData['id'] = currentItem.id;\r\n                if (files.length !== 0) {\r\n                    files.map((item) => {\r\n                        if (item.fileStatus === \"create\") {\r\n                            return formData['otherAttachmentId'].push(item.file.id)\r\n                        }\r\n                        if (item.fileStatus === \"update\") {\r\n                            return formData['files'].push(item)\r\n                        }\r\n                        return item;\r\n                    })\r\n                }\r\n                if (videos.length !== 0) {\r\n                    videos.map((item) => {\r\n                        if (item.fileStatus === \"create\") {\r\n                            return formData['videosId'].push(item.file.id)\r\n                        }\r\n                        if (item.fileStatus === \"update\") {\r\n                            return formData['videos'].push(item)\r\n                        }\r\n                        return item;\r\n                    })\r\n                }\r\n            }\r\n            if (file && file.fileStatus === \"update\") {\r\n                currentFileList.push({ name: \"mainFile\", file: file.file })\r\n            }\r\n            if (file && file.fileStatus === \"create\") {\r\n                formData['mainAttachmentId'] = currentItem.mainAttachment.id;\r\n                currentFileList.push({ name: \"mainFile\", file: {} })\r\n            }\r\n            if (file && file.fileStatus === \"delete\") {\r\n                currentFileList.push({ name: \"mainFile\", file: {} })\r\n            }\r\n            currentFileList.push({ name: \"file1\", file: formData['files'][0] ? { 0: formData['files'][0].file } : {} });\r\n            currentFileList.push({ name: \"file2\", file: formData['files'][1] ? { 0: formData['files'][1].file } : {} });\r\n            currentFileList.push({ name: \"file3\", file: formData['files'][2] ? { 0: formData['files'][2].file } : {} });\r\n            currentFileList.push({\r\n                name: \"video1\",\r\n                file: formData['videos'][0] ? { 0: formData['videos'][0].file } : {}\r\n            });\r\n            currentFileList.push({\r\n                name: \"video2\",\r\n                file: formData['videos'][1] ? { 0: formData['videos'][1].file } : {}\r\n            });\r\n            currentFileList.push({\r\n                name: \"video3\",\r\n                file: formData['videos'][2] ? { 0: formData['videos'][2].file } : {}\r\n            });\r\n            formData['file'] = currentFileList;\r\n            onSubmit(formData)\r\n        })\r\n    };\r\n\r\n    const dynamicFormItems = formItems.map((formItem) =>\r\n        <Col {...ColProps} key={formItem.name}\r\n             hidden={!(formItem.locale === null || formItem.locale === selectedFormLocale.locale)}>\r\n            <FormItem label={<Fragment>{formItem.locale !== null &&\r\n            <i className=\"vertical-align-middle icon icon-check-circle-o mr-1\" />}{formItem.label}</Fragment>}\r\n                      className=\"mb-0 \" hasFeedback {...formItemLayout}>\r\n                {getFieldDecorator(formItem.name, {\r\n                    initialValue: currentItem[formItem.name],\r\n                    ...formItem\r\n                })(formItem.obj)}\r\n            </FormItem>\r\n        </Col>\r\n    );\r\n    const languageMenu = () => (\r\n        <div className=\"gx-popover-lang-scroll overflow-hidden\">\r\n            <ul className=\"gx-sub-popover\">\r\n                {locales.map(language =>\r\n                    <li className=\"gx-media gx-pointer\" key={JSON.stringify(language)}\r\n                        onClick={(e) => onFormLocale(language)}>\r\n                        <i className={`flag flag-24 gx-mr-2 flag-${language.icon}`} />\r\n                        <span className=\"gx-language-text\">{language.name}</span>\r\n                    </li>\r\n                )}\r\n            </ul>\r\n        </div>);\r\n\r\n    const onEditorChange = (e) => {\r\n        onTextChange(e)\r\n    };\r\n\r\n\r\n    return (\r\n        <Modal\r\n            visible={modalVisible}\r\n            title={actionType === \"create\" ?\r\n                intlMessages({\r\n                    en: \"Create new service\",\r\n                    ru: \"Создать новый сервис\",\r\n                    uz: \"Yangi xizmat yaratish\"\r\n                }) :\r\n                intlMessages({\r\n                        en: \"Update service\",\r\n                        ru: \"Изменить сервис\",\r\n                        uz: \"Xizmatni tahrirlash\"\r\n                    }\r\n                )}\r\n            onOk={handleOk}\r\n            bodyStyle={{ height: 550, overflowY: \"auto\" }}\r\n            destroyOnClose={true}\r\n            width={900}\r\n            style={{ top: 20 }}\r\n            onCancel={onCancel}\r\n            cancelText={<IntlMessages id={'cancel'} />}\r\n            okText={<IntlMessages id={'save'} />}>\r\n            <Form layout=\"horizontal\">\r\n                <Row gutter={24}>\r\n                    <Col span={24}>\r\n                        <div className=\"#\">\r\n                            <ul className=\"gx-header-notifications gx-ml-auto\">\r\n                                <li className=\"gx-language\">\r\n                                    <Popover overlayClassName=\"gx-popover-horizantal\" placement=\"bottomRight\"\r\n                                             content={languageMenu()} trigger=\"click\">\r\n              <span className=\"gx-pointer gx-flex-row gx-align-items-center\">\r\n                <i className={`flag flag-24 flag-${selectedFormLocale.icon}`} />\r\n                <span className={'gx-pl-2'}>{selectedFormLocale.name}</span>\r\n                <i className={'icon icon-chevron-down gx-pl-2 d-block'} />\r\n              </span>\r\n                                    </Popover>\r\n                                </li>\r\n                            </ul>\r\n                        </div>\r\n                    </Col>\r\n                    {dynamicFormItems}\r\n                    <Editor\r\n                        title={\"field.text\"}\r\n                        text={text[selectedFormLocale['locale']]}\r\n                        onEditorChange={onEditorChange}\r\n                    />\r\n                    <Col {...ColProps}>\r\n                        <FormItem key=\"isStatus\" className=\"mb-0\" label={<IntlMessages id=\"status\" />}\r\n                                  hasFeedback {...formItemLayout}>\r\n\r\n                            {getFieldDecorator('isStatus', {\r\n                                initialValue: actionType === \"create\" ? true : currentItem && currentItem.isStatus,\r\n                                valuePropName: \"checked\"\r\n                            })\r\n                            (<Switch />)\r\n                            }\r\n                        </FormItem>\r\n                    </Col>\r\n                    <FileUpload\r\n                        name={\"main-img\"}\r\n                        title={<IntlMessages id=\"mainFile\" />}\r\n                        types={[\"image/jpeg\",\r\n                            \"image/png\",\r\n                            \"image/jpg\"]}\r\n                        size={50}\r\n                        file={file}\r\n                        onChangeFile={onChangeFile}\r\n                        formItemLayout={formItemLayout}\r\n                        colLayout={ColProps}\r\n                    />\r\n                    <MultipleFileUpload\r\n                        name={\"other-img\"}\r\n                        files={files}\r\n                        types={[\"image/jpeg\",\r\n                            \"image/png\",\r\n                            \"image/jpg\"]}\r\n                        size={50}\r\n                        fileUploadCount={3}\r\n                        title={<IntlMessages id=\"otherImg\" />}\r\n                        formItemLayout={formItemLayout}\r\n                        colLayout={ColProp2}\r\n                        onChangeFile={onChangeAnyFile}\r\n                    />\r\n                    <MultipleFileVideoUpload\r\n                        name={\"videos\"}\r\n                        files={videos}\r\n                        types={[\"video/mp4\",\r\n                            \"video/webm\",\r\n                            \"video/ogg\"]}\r\n                        size={500}\r\n                        fileUploadCount={3}\r\n                        title={<IntlMessages id=\"video\" />}\r\n                        formItemLayout={formItemLayout}\r\n                        colLayout={ColProp2}\r\n                        onChangeFile={onChangeAnyFileVideo}\r\n                    />\r\n                </Row>\r\n            </Form>\r\n        </Modal>\r\n    )\r\n};\r\n\r\nmodal.propTypes = {\r\n    form: PropTypes.object.isRequired,\r\n    type: PropTypes.string,\r\n    item: PropTypes.object,\r\n    onSubmit: PropTypes.func,\r\n};\r\n\r\nexport default Form.create()(modal)\r\n"]},"metadata":{},"sourceType":"module"}