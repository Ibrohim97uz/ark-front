{"ast":null,"code":"import _objectSpread from\"C:\\\\Users\\\\Ibrohim\\\\Desktop\\\\ark-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"C:\\\\Users\\\\Ibrohim\\\\Desktop\\\\ark-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\Ibrohim\\\\Desktop\\\\ark-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\Ibrohim\\\\Desktop\\\\ark-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\Ibrohim\\\\Desktop\\\\ark-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{Card,Input,notification}from\"antd\";import ApiRequest from\"../../../../../services\";import api from'../../../../../services/app';import Filter from'./components/Filter';import Modal from'./components/Modal';import List from'./components/List';import IntlMessages,{intlMessages}from\"../../../../../util/IntlMessages\";var getPositionType=api.getPositionType,postPositionType=api.postPositionType,deletePositionType=api.deletePositionType,searchPositionType=api.searchPositionType;var Region=/*#__PURE__*/function(_Component){_inherits(Region,_Component);var _super=_createSuper(Region);function Region(props){var _this;_classCallCheck(this,Region);_this=_super.call(this,props);_this.onStartEvent=function(payload){ApiRequest(getPositionType,payload).then(function(result){if(result.success){_this.setState(function(state,props){return{list:result._embedded.list,pagination:_objectSpread(_objectSpread({},state.pagination),{},{total:result.page.totalElements||result._embedded.list.length})};});}});};_this.onRequestFunc=function(path,data,message){ApiRequest(path,data).then(function(result){if(result.success){_this.setState({actionType:'create',modalVisible:false,currentItem:{}});notification.success({key:message.key,message:message.messageSuccess,description:message.descriptionSuccess});_this.onStartEvent();}else{notification.error({key:message.key,message:message.messageError,description:message.descriptionError});}});};_this.onSubmit=function(data){var message={};if(_this.state.actionType===\"create\"){message={key:\"create\",messageError:intlMessages({en:\"There was an error creating\",ru:\"Произошла ошибка при создании\",uz:\"Yaratishda xatolik yuz berdi\"}),messageSuccess:intlMessages({en:\"Successfully created\",ru:\"Успешно создан\",uz:\"Muvaffaqqiyatli yaratildi\"})};_this.onRequestFunc(postPositionType,data,message);}if(_this.state.actionType===\"update\"){message={key:\"update\",messageError:intlMessages({en:\"There was an error updating\",ru:\"Произошла ошибка при изменение\",uz:\"Tahrirlashda xatolik yuz berdi\"}),messageSuccess:intlMessages({en:\"Successfully updated\",ru:\"Успешно изменено\",uz:\"Muvaffaqqiyatli tahrirlandi\"})};_this.onRequestFunc(postPositionType,data,message);}};_this.onCancel=function(){_this.setState({modalVisible:false,actionType:'create'});};_this.onAdd=function(){_this.setState({modalVisible:true,actionType:'create'});};_this.onDelete=function(dataItemId){var message={key:\"delete\",messageError:intlMessages({en:\"There was an error deleting\",ru:\"Произошла ошибка при удалении\",uz:\"O'chirishda xatolik yuz berdi\"}),messageSuccess:intlMessages({en:\"Successfully deleted\",ru:\"Успешно удален\",uz:\"Muvaffaqiyatli o'chirildi\"})};_this.onRequestFunc(deletePositionType,{id:dataItemId},message);};_this.onEditItem=function(dataItem){_this.setState({actionType:\"update\",currentItem:dataItem,modalVisible:true});};_this.onChange=function(page){_this.setState(function(state,props){return{pagination:_objectSpread(_objectSpread({},state.pagination),{},{current:page})};});_this.onStartEvent({page:page-1});};_this.onShowSizeChange=function(current,size){_this.onStartEvent({page:current-1,size:size});_this.setState(function(state,props){return{pagination:_objectSpread(_objectSpread({},state.pagination),{},{current:current,pageSize:size})};});};_this.onChangeSearch=function(text){_this.setState({searchText:text});};_this.handleResetSearch=function(){_this.onStartEvent({page:0,size:20});_this.setState({searchText:\"\"});};_this.handleSubmitSearch=function(){ApiRequest(searchPositionType,{word:_this.state.searchText}).then(function(result){if(result.success){_this.setState({list:result.object});}});};_this.state={actionType:'create',align:\"center\",modalVisible:false,searchText:\"\",columns:[{title:/*#__PURE__*/React.createElement(\"strong\",null,\"\\u2116\"),key:\"№\",width:60,render:function render(text,record,index){return index+1;}},intlMessages({en:{title:\"Position type\",dataIndex:'nameEn',key:'nameEn'},ru:{title:\"Тип должность\",dataIndex:'nameRu',key:'nameRu'},uz:{title:\"Lavozim turi\",dataIndex:'nameUz',key:'nameUz'}})],formItems:[{label:\"English\",name:'nameEn',rules:[{required:true,message:/*#__PURE__*/React.createElement(IntlMessages,{id:\"E_ERROR\"})}],obj:/*#__PURE__*/React.createElement(Input,null)},{label:\"Русский\",name:'nameRu',rules:[{required:true,message:/*#__PURE__*/React.createElement(IntlMessages,{id:\"E_ERROR\"})}],obj:/*#__PURE__*/React.createElement(Input,null)},{label:\"O'zbek\",name:'nameUz',rules:[{required:true,message:/*#__PURE__*/React.createElement(IntlMessages,{id:\"E_ERROR\"})}],obj:/*#__PURE__*/React.createElement(Input,null)}],currentItem:{},list:[],pagination:{showSizeChanger:true,showQuickJumper:true,showTotal:function showTotal(total){return\"Total \".concat(total,\" Items\");},current:1,total:0,pageSize:20}};return _this;}_createClass(Region,[{key:\"componentDidMount\",value:function componentDidMount(){this.onStartEvent({page:0,size:20});}},{key:\"render\",value:function render(){var _this$state=this.state,currentItem=_this$state.currentItem,modalVisible=_this$state.modalVisible,searchText=_this$state.searchText,columns=_this$state.columns,formItems=_this$state.formItems,list=_this$state.list,actionType=_this$state.actionType,pagination=_this$state.pagination;return/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(Filter,{searchText:searchText,handleResetSearch:this.handleResetSearch,handleSubmitSearch:this.handleSubmitSearch,onChangeSearch:this.onChangeSearch,onAdd:this.onAdd}),/*#__PURE__*/React.createElement(List,{visibleColumns:columns,dataSource:list,onEditItem:this.onEditItem,pagination:pagination.total>=10?_objectSpread(_objectSpread({},pagination),{},{onChange:this.onChange,onShowSizeChange:this.onShowSizeChange}):false,onDeleteItem:this.onDelete}),/*#__PURE__*/React.createElement(Modal,{onSubmit:this.onSubmit,onCancel:this.onCancel,actionType:actionType,modalVisible:modalVisible,currentItem:actionType==='create'?{}:currentItem,formItems:formItems}));}}]);return Region;}(Component);export default Region;","map":{"version":3,"sources":["C:/Users/Ibrohim/Desktop/ark-front/src/routes/routesManagers/settings/dictionary/positionType/index.js"],"names":["React","Component","Card","Input","notification","ApiRequest","api","Filter","Modal","List","IntlMessages","intlMessages","getPositionType","postPositionType","deletePositionType","searchPositionType","Region","props","onStartEvent","payload","then","result","success","setState","state","list","_embedded","pagination","total","page","totalElements","length","onRequestFunc","path","data","message","actionType","modalVisible","currentItem","key","messageSuccess","description","descriptionSuccess","error","messageError","descriptionError","onSubmit","en","ru","uz","onCancel","onAdd","onDelete","dataItemId","id","onEditItem","dataItem","onChange","current","onShowSizeChange","size","pageSize","onChangeSearch","text","searchText","handleResetSearch","handleSubmitSearch","word","object","align","columns","title","width","render","record","index","dataIndex","formItems","label","name","rules","required","obj","showSizeChanger","showQuickJumper","showTotal"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\r\nimport {Card, Input, notification} from \"antd\";\r\nimport ApiRequest from \"../../../../../services\";\r\nimport api from '../../../../../services/app'\r\nimport Filter from './components/Filter'\r\nimport Modal from './components/Modal'\r\nimport List from './components/List'\r\nimport IntlMessages, {intlMessages} from \"../../../../../util/IntlMessages\";\r\n\r\nconst {getPositionType, postPositionType, deletePositionType,searchPositionType} = api;\r\n\r\nclass Region extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      actionType: 'create',\r\n      align: \"center\",\r\n      modalVisible: false,\r\n      searchText:\"\",\r\n      columns: [{\r\n        title: <strong>№</strong>,\r\n        key: \"№\",\r\n        width: 60,\r\n        render: (text, record, index) => index + 1,\r\n      },\r\n        (intlMessages({\r\n          en: {\r\n            title: \"Position type\",\r\n            dataIndex: 'nameEn',\r\n            key: 'nameEn'\r\n          }, ru: {\r\n            title: \"Тип должность\",\r\n            dataIndex: 'nameRu',\r\n            key: 'nameRu'\r\n          },\r\n          uz: {\r\n            title: \"Lavozim turi\",\r\n            dataIndex: 'nameUz',\r\n            key: 'nameUz'\r\n          }\r\n        }))\r\n      ],\r\n      formItems: [\r\n        {\r\n          label: \"English\",\r\n          name: 'nameEn',\r\n          rules: [\r\n            {\r\n              required: true,\r\n              message: <IntlMessages id=\"E_ERROR\"/>\r\n\r\n            },\r\n          ],\r\n          obj: <Input/>\r\n        },\r\n        {\r\n          label: \"Русский\",\r\n          name: 'nameRu',\r\n          rules: [\r\n            {\r\n              required: true,\r\n              message: <IntlMessages id=\"E_ERROR\"/>\r\n\r\n            },\r\n          ],\r\n          obj: <Input/>\r\n        },\r\n\r\n        {\r\n          label: \"O'zbek\",\r\n          name: 'nameUz',\r\n          rules: [\r\n            {\r\n              required: true,\r\n              message: <IntlMessages id=\"E_ERROR\"/>\r\n            },\r\n          ],\r\n          obj: <Input/>\r\n        },\r\n      ],\r\n      currentItem: {},\r\n      list: [],\r\n      pagination: {\r\n        showSizeChanger: true,\r\n        showQuickJumper: true,\r\n        showTotal: total => `Total ${total} Items`,\r\n        current: 1,\r\n        total: 0,\r\n        pageSize: 20,\r\n      },\r\n\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.onStartEvent(\r\n      {\r\n        page: 0,\r\n        size: 20\r\n      }\r\n    )\r\n  }\r\n\r\n  onStartEvent = (payload) => {\r\n    ApiRequest(getPositionType, payload).then((result => {\r\n      if (result.success) {\r\n        this.setState((state, props) => ({\r\n          list: result._embedded.list,\r\n          pagination: {\r\n            ...state.pagination,\r\n            total: result.page.totalElements || result._embedded.list.length,\r\n          }\r\n        }));\r\n\r\n      }\r\n    }))\r\n  };\r\n\r\n\r\n  onRequestFunc = (path, data, message) => {\r\n    ApiRequest(path, data).then((result => {\r\n      if (result.success) {\r\n        this.setState({\r\n          actionType: 'create',\r\n          modalVisible: false,\r\n          currentItem: {},\r\n        });\r\n        notification.success({\r\n          key: message.key,\r\n          message: message.messageSuccess,\r\n          description: message.descriptionSuccess,\r\n        });\r\n        this.onStartEvent()\r\n      } else {\r\n        notification.error({\r\n          key: message.key,\r\n          message: message.messageError,\r\n          description: message.descriptionError,\r\n        });\r\n      }\r\n    }))\r\n  };\r\n\r\n\r\n  onSubmit = (data) => {\r\n    let message = {};\r\n    if (this.state.actionType === \"create\") {\r\n      message = {\r\n        key: \"create\",\r\n        messageError: intlMessages({en:\"There was an error creating\",ru:\"Произошла ошибка при создании\",uz:\"Yaratishda xatolik yuz berdi\"}),\r\n        messageSuccess: intlMessages({en:\"Successfully created\",ru:\"Успешно создан\",uz:\"Muvaffaqqiyatli yaratildi\"}),\r\n      };\r\n      this.onRequestFunc(postPositionType, data, message)\r\n    }\r\n    if (this.state.actionType === \"update\") {\r\n      message = {\r\n        key: \"update\",\r\n        messageError: intlMessages({en:\"There was an error updating\",ru:\"Произошла ошибка при изменение\",uz:\"Tahrirlashda xatolik yuz berdi\"}),\r\n        messageSuccess: intlMessages({en:\"Successfully updated\",ru:\"Успешно изменено\",uz:\"Muvaffaqqiyatli tahrirlandi\"}),\r\n      };\r\n      this.onRequestFunc(postPositionType, data, message)\r\n    }\r\n  };\r\n  onCancel = () => {\r\n    this.setState({modalVisible: false, actionType: 'create'})\r\n  };\r\n  onAdd = () => {\r\n    this.setState({modalVisible: true, actionType: 'create'})\r\n  };\r\n  onDelete = (dataItemId) => {\r\n    let message = {\r\n      key: \"delete\",\r\n      messageError: intlMessages({en:\"There was an error deleting\",ru:\"Произошла ошибка при удалении\",uz:\"O'chirishda xatolik yuz berdi\"}),\r\n      messageSuccess: intlMessages({en:\"Successfully deleted\",ru:\"Успешно удален\",uz:\"Muvaffaqiyatli o'chirildi\"}),\r\n    };\r\n    this.onRequestFunc(deletePositionType, {id: dataItemId}, message)\r\n  };\r\n  onEditItem = (dataItem) => {\r\n    this.setState({\r\n      actionType: \"update\",\r\n      currentItem: dataItem,\r\n      modalVisible: true,\r\n    })\r\n  };\r\n\r\n  onChange = (page) => {\r\n    this.setState((state, props) => ({\r\n      pagination: {\r\n        ...state.pagination,\r\n        current:page\r\n      }\r\n    }));\r\n    this.onStartEvent({page:page-1});\r\n  };\r\n  onShowSizeChange = (current, size) => {\r\n    this.onStartEvent({page:current-1,size:size});\r\n    this.setState((state, props) => ({\r\n      pagination: {\r\n        ...state.pagination,\r\n        current:current,\r\n        pageSize:size\r\n      }\r\n    }));\r\n  };\r\n\r\n  onChangeSearch = (text) => {\r\n    this.setState({\r\n      searchText: text\r\n    })\r\n  };\r\n\r\n  handleResetSearch = () => {\r\n    this.onStartEvent(\r\n        {\r\n          page: 0,\r\n          size: 20\r\n        }\r\n    );\r\n    this.setState({\r\n      searchText: \"\",\r\n    })\r\n  };\r\n\r\n  handleSubmitSearch = () => {\r\n    ApiRequest(searchPositionType, {word: this.state.searchText}).then((result) => {\r\n      if (result.success) {\r\n        this.setState({\r\n          list: result.object,\r\n        })\r\n      }\r\n    })\r\n  };\r\n\r\n  render() {\r\n    const {currentItem, modalVisible,searchText, columns, formItems, list, actionType, pagination} = this.state;\r\n\r\n    return (\r\n      <Card>\r\n        <Filter\r\n            searchText={searchText}\r\n            handleResetSearch={this.handleResetSearch}\r\n            handleSubmitSearch={this.handleSubmitSearch}\r\n            onChangeSearch={this.onChangeSearch}\r\n            onAdd={this.onAdd}/>\r\n        <List visibleColumns={columns}\r\n              dataSource={list}\r\n              onEditItem={this.onEditItem}\r\n              pagination={pagination.total >= 10 ? {\r\n                ...pagination,\r\n                onChange: this.onChange,\r\n                onShowSizeChange: this.onShowSizeChange\r\n              } : false}\r\n              onDeleteItem={this.onDelete}/>\r\n        <Modal\r\n          onSubmit={this.onSubmit}\r\n          onCancel={this.onCancel}\r\n          actionType={actionType}\r\n          modalVisible={modalVisible}\r\n          currentItem={actionType === 'create' ? {} : currentItem}\r\n          formItems={formItems}\r\n        />\r\n      </Card>\r\n    );\r\n  }\r\n}\r\n\r\n\r\n\r\n\r\nexport default Region;\r\n"]},"metadata":{},"sourceType":"module"}