{"ast":null,"code":"import _objectSpread from\"C:\\\\Users\\\\Ibrohim\\\\Desktop\\\\ark-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"C:\\\\Users\\\\Ibrohim\\\\Desktop\\\\ark-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\Ibrohim\\\\Desktop\\\\ark-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\Ibrohim\\\\Desktop\\\\ark-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\Ibrohim\\\\Desktop\\\\ark-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{Card,Input,notification}from\"antd/lib/index\";import ApiRequest from\"../../../../services\";import api from'../../../../services/app';import Filter from'./components/Filter';import Modal from'./components/Modal';import List from'./components/List';import IntlMessages,{intlMessages}from\"../../../../util/IntlMessages\";import{FileView}from\"../../../../components/CustomComponents\";import{apiFileUrl}from\"../../../../util/constants\";var getFleet=api.getFleet,postFleet=api.postFleet,putFleet=api.putFleet,deleteFleet=api.deleteFleet;var TextArea=Input.TextArea;var Certificates=/*#__PURE__*/function(_Component){_inherits(Certificates,_Component);var _super=_createSuper(Certificates);function Certificates(props){var _this;_classCallCheck(this,Certificates);_this=_super.call(this,props);_this.onStartEvent=function(payload){ApiRequest(getFleet,payload).then(function(result){if(result.success){_this.setState({list:result.object});}});};_this.onRequestFunc=function(path,data,message){ApiRequest(path,data).then(function(result){if(result.success){_this.setState({actionType:'create',modalVisible:false,currentItem:{},file:null});notification.success({key:message.key,message:message.messageSuccess,description:message.descriptionSuccess});_this.onStartEvent();}else{notification.error({key:message.key,message:message.messageError,description:message.descriptionError});}});};_this.onFormLocale=function(dataItem){return _this.setState({selectedFormLocale:dataItem});};_this.onSubmit=function(data){var message={};if(_this.state.actionType===\"create\"){message={key:\"create\",messageError:intlMessages({en:\"There was an error creating\",ru:\"Произошла ошибка при создании\",uz:\"Yaratishda xatolik yuz berdi\"}),messageSuccess:intlMessages({en:\"Successfully created\",ru:\"Успешно создан\",uz:\"Muvaffaqqiyatli yaratildi\"})};_this.onRequestFunc(postFleet,data,message);}if(_this.state.actionType===\"update\"){message={key:\"update\",messageError:intlMessages({en:\"There was an error updating\",ru:\"Произошла ошибка при изменение\",uz:\"Tahrirlashda xatolik yuz berdi\"}),messageSuccess:intlMessages({en:\"Successfully updated\",ru:\"Успешно изменено\",uz:\"Muvaffaqqiyatli tahrirlandi\"})};_this.onRequestFunc(putFleet,_objectSpread({id:_this.state.currentItem.id},data),message);}};_this.onCancel=function(){_this.setState({modalVisible:false,actionType:'create',file:null,selectedFormLocale:{languageId:'nameEn',locale:'en',name:'English',icon:'us'}});};_this.onAdd=function(){_this.setState({modalVisible:true,actionType:'create'});};_this.onDelete=function(dataItemId){var message={key:\"delete\",messageError:intlMessages({en:\"There was an error deleting\",ru:\"Произошла ошибка при удалении\",uz:\"O'chirishda xatolik yuz berdi\"}),messageSuccess:intlMessages({en:\"Successfully deleted\",ru:\"Успешно удален\",uz:\"Muvaffaqiyatli o'chirildi\"})};_this.onRequestFunc(deleteFleet,{id:dataItemId},message);};_this.onEditItem=function(dataItem){_this.setState({actionType:\"update\",currentItem:dataItem,file:dataItem.attachment?{fileUrl:apiFileUrl+dataItem.attachment.id,file:dataItem.attachment}:null,modalVisible:true});};_this.onChangeFile=function(file){_this.setState({file:file});};_this.state={actionType:'create',modalVisible:false,columns:[{title:/*#__PURE__*/React.createElement(\"strong\",null,\"\\u2116\"),key:\"№\",align:\"center\",width:60,render:function render(text,record,index){return index+1;}},{title:/*#__PURE__*/React.createElement(IntlMessages,{id:'attachment'}),key:\"file\",align:\"center\",width:100,render:function render(text,record,index){return/*#__PURE__*/React.createElement(FileView,{fileId:record.attachment&&record.attachment.id,defaultView:\"picture\"});}},intlMessages({en:{title:\"Title\",dataIndex:'titleEn',key:'titleEn',align:\"center\"},ru:{title:\"Название\",dataIndex:'titleRu',key:'titleRu',align:\"center\"},uz:{title:\"Sarlavha\",dataIndex:'titleUz',key:'titleUz',align:\"center\"}}),intlMessages({en:{title:\"Description\",dataIndex:'descriptionEn',key:'descriptionEn'},ru:{title:\"Описание\",dataIndex:'descriptionRu',key:'descriptionRu'},uz:{title:\"Ta'rif\",dataIndex:'descriptionUz',key:'descriptionUz'}})],formItems:[{label:\"Title\",name:'titleEn',rules:[{required:true,message:/*#__PURE__*/React.createElement(IntlMessages,{id:\"E_ERROR\"})}],locale:\"en\",obj:/*#__PURE__*/React.createElement(Input,null)},{label:\"Description\",name:'descriptionEn',rules:[{required:true,message:/*#__PURE__*/React.createElement(IntlMessages,{id:\"E_ERROR\"})}],locale:\"en\",obj:/*#__PURE__*/React.createElement(TextArea,{rows:4,autoSize:true,allowClear:true})},{label:\"Название\",name:'titleRu',locale:\"ru\",obj:/*#__PURE__*/React.createElement(Input,null)},{label:\"Описание\",name:'descriptionRu',locale:\"ru\",obj:/*#__PURE__*/React.createElement(TextArea,{rows:4,autoSize:true,allowClear:true})},{label:\"Sarlavha\",name:'titleUz',locale:\"uz\",obj:/*#__PURE__*/React.createElement(Input,null)},{label:\"Ta'rif\",name:'descriptionUz',locale:\"uz\",obj:/*#__PURE__*/React.createElement(TextArea,{rows:4,autoSize:true,allowClear:true})}],currentItem:{},list:[],pagination:{showSizeChanger:true,showQuickJumper:true,showTotal:function showTotal(total){return\"Total \".concat(total,\" Items\");},current:1,total:0,pageSize:20},selectedFormLocale:{languageId:'nameEn',locale:'en',name:'English',icon:'us'},file:null};return _this;}_createClass(Certificates,[{key:\"componentDidMount\",value:function componentDidMount(){this.onStartEvent();}},{key:\"render\",value:function render(){var _this$state=this.state,currentItem=_this$state.currentItem,modalVisible=_this$state.modalVisible,file=_this$state.file,columns=_this$state.columns,formItems=_this$state.formItems,list=_this$state.list,actionType=_this$state.actionType,pagination=_this$state.pagination,selectedFormLocale=_this$state.selectedFormLocale;return/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(Filter,{onAdd:this.onAdd}),/*#__PURE__*/React.createElement(List,{visibleColumns:columns,dataSource:list,onEditItem:this.onEditItem,pagination:pagination.total>=10?_objectSpread({},pagination):false,onDeleteItem:this.onDelete}),/*#__PURE__*/React.createElement(Modal,{onSubmit:this.onSubmit,onCancel:this.onCancel,onChangeFile:this.onChangeFile,onFormLocale:this.onFormLocale,file:file,modalVisible:modalVisible,selectedFormLocale:selectedFormLocale,formItems:formItems,actionType:actionType,currentItem:actionType==='create'?{}:currentItem}));}}]);return Certificates;}(Component);export default Certificates;","map":{"version":3,"sources":["C:/Users/Ibrohim/Desktop/ark-front/src/routes/routesManagers/settings/fleet/index.js"],"names":["React","Component","Card","Input","notification","ApiRequest","api","Filter","Modal","List","IntlMessages","intlMessages","FileView","apiFileUrl","getFleet","postFleet","putFleet","deleteFleet","TextArea","Certificates","props","onStartEvent","payload","then","result","success","setState","list","object","onRequestFunc","path","data","message","actionType","modalVisible","currentItem","file","key","messageSuccess","description","descriptionSuccess","error","messageError","descriptionError","onFormLocale","dataItem","selectedFormLocale","onSubmit","state","en","ru","uz","id","onCancel","languageId","locale","name","icon","onAdd","onDelete","dataItemId","onEditItem","attachment","fileUrl","onChangeFile","columns","title","align","width","render","text","record","index","dataIndex","formItems","label","rules","required","obj","pagination","showSizeChanger","showQuickJumper","showTotal","total","current","pageSize"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\r\nimport {Card, Input, notification} from \"antd/lib/index\";\r\nimport ApiRequest from \"../../../../services\";\r\nimport api from '../../../../services/app'\r\nimport Filter from './components/Filter'\r\nimport Modal from './components/Modal'\r\nimport List from './components/List'\r\nimport IntlMessages, {intlMessages} from \"../../../../util/IntlMessages\";\r\nimport {FileView} from \"../../../../components/CustomComponents\";\r\nimport {apiFileUrl} from \"../../../../util/constants\";\r\n\r\nconst {getFleet, postFleet, putFleet, deleteFleet} = api;\r\nconst {TextArea} = Input;\r\n\r\nclass Certificates extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            actionType: 'create',\r\n            modalVisible: false,\r\n            columns: [{\r\n                title: <strong>№</strong>,\r\n                key: \"№\",\r\n                align: \"center\",\r\n                width: 60,\r\n                render: (text, record, index) => index + 1,\r\n            },\r\n                {\r\n                    title: <IntlMessages id={'attachment'}/>,\r\n                    key: \"file\",\r\n                    align: \"center\",\r\n                    width: 100,\r\n                    render: (text, record, index) => (\r\n                        <FileView fileId={record.attachment && record.attachment.id} defaultView={\"picture\"}/>),\r\n                },\r\n                (intlMessages({\r\n                    en: {\r\n                        title: \"Title\",\r\n                        dataIndex: 'titleEn',\r\n                        key: 'titleEn',\r\n                        align: \"center\",\r\n                    }, ru: {\r\n                        title: \"Название\",\r\n                        dataIndex: 'titleRu',\r\n                        key: 'titleRu',\r\n                        align: \"center\",\r\n                    },\r\n                    uz: {\r\n                        title: \"Sarlavha\",\r\n                        dataIndex: 'titleUz',\r\n                        key: 'titleUz',\r\n                        align: \"center\",\r\n                    }\r\n                })),\r\n                (intlMessages({\r\n                    en: {\r\n                        title: \"Description\",\r\n                        dataIndex: 'descriptionEn',\r\n                        key: 'descriptionEn',\r\n                    }, ru: {\r\n                        title: \"Описание\",\r\n                        dataIndex: 'descriptionRu',\r\n                        key: 'descriptionRu',\r\n                    },\r\n                    uz: {\r\n                        title: \"Ta'rif\",\r\n                        dataIndex: 'descriptionUz',\r\n                        key: 'descriptionUz',\r\n                    }\r\n                }))\r\n\r\n            ],\r\n            formItems: [\r\n                {\r\n                    label: \"Title\",\r\n                    name: 'titleEn',\r\n                    rules: [\r\n                        {\r\n                            required: true,\r\n                            message: <IntlMessages id=\"E_ERROR\"/>\r\n\r\n                        },\r\n                    ],\r\n                    locale: \"en\",\r\n                    obj: <Input/>\r\n                },\r\n                {\r\n                    label: \"Description\",\r\n                    name: 'descriptionEn',\r\n                    rules: [\r\n                        {\r\n                            required: true,\r\n                            message: <IntlMessages id=\"E_ERROR\"/>\r\n\r\n                        },\r\n                    ],\r\n                    locale: \"en\",\r\n                    obj: <TextArea rows={4} autoSize allowClear/>\r\n                },\r\n                {\r\n                    label: \"Название\",\r\n                    name: 'titleRu',\r\n                    locale: \"ru\",\r\n                    obj: <Input/>\r\n                },\r\n                {\r\n                    label: \"Описание\",\r\n                    name: 'descriptionRu',\r\n                    locale: \"ru\",\r\n                    obj: <TextArea rows={4} autoSize allowClear/>\r\n                },\r\n                {\r\n                    label: \"Sarlavha\",\r\n                    name: 'titleUz',\r\n                    locale: \"uz\",\r\n                    obj: <Input/>\r\n                },\r\n                {\r\n                    label: \"Ta'rif\",\r\n                    name: 'descriptionUz',\r\n                    locale: \"uz\",\r\n                    obj: <TextArea rows={4} autoSize allowClear/>\r\n                },\r\n            ],\r\n            currentItem: {},\r\n            list: [],\r\n            pagination: {\r\n                showSizeChanger: true,\r\n                showQuickJumper: true,\r\n                showTotal: total => `Total ${total} Items`,\r\n                current: 1,\r\n                total: 0,\r\n                pageSize: 20,\r\n            },\r\n            selectedFormLocale: {\r\n                languageId: 'nameEn',\r\n                locale: 'en',\r\n                name: 'English',\r\n                icon: 'us',\r\n            },\r\n            file: null\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.onStartEvent()\r\n    }\r\n\r\n    onStartEvent = (payload) => {\r\n        ApiRequest(getFleet, payload).then((result => {\r\n            if (result.success) {\r\n                this.setState({\r\n                    list: result.object,\r\n                })\r\n            }\r\n        }));\r\n    };\r\n\r\n    onRequestFunc = (path, data, message) => {\r\n        ApiRequest(path, data).then((result => {\r\n            if (result.success) {\r\n                this.setState({\r\n                    actionType: 'create',\r\n                    modalVisible: false,\r\n                    currentItem: {},\r\n                    file: null\r\n                });\r\n                notification.success({\r\n                    key: message.key,\r\n                    message: message.messageSuccess,\r\n                    description: message.descriptionSuccess,\r\n                });\r\n                this.onStartEvent()\r\n            } else {\r\n                notification.error({\r\n                    key: message.key,\r\n                    message: message.messageError,\r\n                    description: message.descriptionError,\r\n                });\r\n            }\r\n        }))\r\n    };\r\n\r\n    onFormLocale = (dataItem) => {\r\n        return this.setState({\r\n            selectedFormLocale: dataItem\r\n        })\r\n    };\r\n\r\n    onSubmit = (data) => {\r\n        let message = {};\r\n        if (this.state.actionType === \"create\") {\r\n            message = {\r\n                key: \"create\",\r\n                messageError: intlMessages({\r\n                    en: \"There was an error creating\",\r\n                    ru: \"Произошла ошибка при создании\",\r\n                    uz: \"Yaratishda xatolik yuz berdi\"\r\n                }),\r\n                messageSuccess: intlMessages({\r\n                    en: \"Successfully created\",\r\n                    ru: \"Успешно создан\",\r\n                    uz: \"Muvaffaqqiyatli yaratildi\"\r\n                }),\r\n            };\r\n            this.onRequestFunc(postFleet, data, message)\r\n        }\r\n        if (this.state.actionType === \"update\") {\r\n            message = {\r\n                key: \"update\",\r\n                messageError: intlMessages({\r\n                    en: \"There was an error updating\",\r\n                    ru: \"Произошла ошибка при изменение\",\r\n                    uz: \"Tahrirlashda xatolik yuz berdi\"\r\n                }),\r\n                messageSuccess: intlMessages({\r\n                    en: \"Successfully updated\",\r\n                    ru: \"Успешно изменено\",\r\n                    uz: \"Muvaffaqqiyatli tahrirlandi\"\r\n                }),\r\n            };\r\n            this.onRequestFunc(putFleet, {\r\n                id: this.state.currentItem.id, ...data\r\n            }, message)\r\n        }\r\n    };\r\n\r\n    onCancel = () => {\r\n        this.setState({\r\n                modalVisible: false,\r\n                actionType: 'create',\r\n                file: null,\r\n                selectedFormLocale: {\r\n                    languageId: 'nameEn',\r\n                    locale: 'en',\r\n                    name: 'English',\r\n                    icon: 'us',\r\n                }\r\n            }\r\n        )\r\n    };\r\n\r\n    onAdd = () => {\r\n        this.setState({modalVisible: true, actionType: 'create'})\r\n    };\r\n\r\n    onDelete = (dataItemId) => {\r\n        let message = {\r\n            key: \"delete\",\r\n            messageError: intlMessages({\r\n                en: \"There was an error deleting\",\r\n                ru: \"Произошла ошибка при удалении\",\r\n                uz: \"O'chirishda xatolik yuz berdi\"\r\n            }),\r\n            messageSuccess: intlMessages({\r\n                en: \"Successfully deleted\",\r\n                ru: \"Успешно удален\",\r\n                uz: \"Muvaffaqiyatli o'chirildi\"\r\n            }),\r\n        };\r\n        this.onRequestFunc(deleteFleet, {id: dataItemId}, message)\r\n    };\r\n\r\n    onEditItem = (dataItem) => {\r\n        this.setState({\r\n            actionType: \"update\",\r\n            currentItem: dataItem,\r\n            file: dataItem.attachment ? {\r\n                fileUrl: apiFileUrl + dataItem.attachment.id,\r\n                file: dataItem.attachment\r\n            } : null,\r\n            modalVisible: true,\r\n        })\r\n    };\r\n\r\n    onChangeFile = (file) => {\r\n        this.setState({\r\n            file: file\r\n        })\r\n    };\r\n\r\n\r\n    render() {\r\n        const {currentItem, modalVisible, file, columns, formItems, list, actionType, pagination, selectedFormLocale} = this.state;\r\n        return (\r\n            <Card>\r\n                <Filter onAdd={this.onAdd}/>\r\n                <List visibleColumns={columns}\r\n                      dataSource={list}\r\n                      onEditItem={this.onEditItem}\r\n                      pagination={pagination.total >= 10 ? {\r\n                          ...pagination,\r\n                      } : false}\r\n                      onDeleteItem={this.onDelete}/>\r\n                <Modal\r\n                    onSubmit={this.onSubmit}\r\n                    onCancel={this.onCancel}\r\n                    onChangeFile={this.onChangeFile}\r\n                    onFormLocale={this.onFormLocale}\r\n                    file={file}\r\n                    modalVisible={modalVisible}\r\n                    selectedFormLocale={selectedFormLocale}\r\n                    formItems={formItems}\r\n                    actionType={actionType}\r\n                    currentItem={actionType === 'create' ? {} : currentItem}\r\n                />\r\n            </Card>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Certificates;\r\n"]},"metadata":{},"sourceType":"module"}