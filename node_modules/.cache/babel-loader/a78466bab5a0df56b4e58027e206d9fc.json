{"ast":null,"code":"import _objectSpread from \"C:\\\\Users\\\\Ibrohim\\\\Desktop\\\\ark-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\Ibrohim\\\\Desktop\\\\ark-front\\\\src\\\\routes\\\\routesManagers\\\\settings\\\\certificate\\\\components\\\\Modal.js\";\n\nimport React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Form, Modal, Popover, Row, Col, message } from 'antd';\nimport { FileUpload } from '../../../../../components/CustomComponents';\nimport IntlMessages, { intlMessages } from \"../../../../../util/IntlMessages\";\nimport config from \"../../../../../util/config\";\nvar locales = config.locales;\nvar FormItem = Form.Item;\nvar formItemLayout = {\n  labelCol: {\n    xs: 24,\n    justify: \"center\"\n  },\n  wrapperCol: {\n    justify: \"center\",\n    xs: 24\n  }\n};\nvar ColProps = {\n  xs: 24,\n  sm: 24,\n  md: 24,\n  xl: 24,\n  ld: 24\n};\n\nvar modal = function modal(_ref) {\n  var currentItem = _ref.currentItem,\n      onFormLocale = _ref.onFormLocale,\n      onSubmit = _ref.onSubmit,\n      onCancel = _ref.onCancel,\n      file = _ref.file,\n      onChangeFile = _ref.onChangeFile,\n      modalVisible = _ref.modalVisible,\n      formItems = _ref.formItems,\n      selectedFormLocale = _ref.selectedFormLocale,\n      actionType = _ref.actionType,\n      _ref$form = _ref.form,\n      getFieldDecorator = _ref$form.getFieldDecorator,\n      validateFields = _ref$form.validateFields,\n      getFieldsValue = _ref$form.getFieldsValue;\n\n  var handleOk = function handleOk() {\n    validateFields(function (errors) {\n      if (errors || file == null || file.file == null) {\n        for (var i in errors) {\n          if (i === \"titleEn\" || i === \"descriptionEn\") {\n            return onFormLocale(locales[0]);\n          }\n        }\n\n        if (file === null || file.file === null) {\n          message.error(intlMessages({\n            en: \"File problem!\",\n            ru: \"Проблема с файлом!\",\n            uz: \"Fayl bilan bog'liq muammo!\"\n          }));\n        }\n\n        return;\n      }\n\n      var formData = getFieldsValue();\n      formData['titleRu'] = formData['titleRu'] === undefined ? formData['titleEn'] : formData['titleRu'];\n      formData['titleUz'] = formData['titleUz'] === undefined ? formData['titleEn'] : formData['titleUz'];\n      formData['descriptionRu'] = formData['descriptionRu'] === undefined ? formData['descriptionEn'] : formData['descriptionRu'];\n      formData['descriptionUz'] = formData['descriptionUz'] === undefined ? formData['descriptionEn'] : formData['descriptionUz'];\n      formData['file'] = file.file;\n      formData['fileUpload'] = true;\n      formData['type'] = true;\n\n      if (actionType === \"update\") {\n        formData['id'] = currentItem.id;\n        if (file && file.fileStatus === \"update\") delete formData['fileId'];\n\n        if (file && file.fileStatus === \"delete\") {\n          delete formData['fileId'];\n          formData['file'] = {};\n        }\n\n        if (file && !file.fileStatus) {\n          formData['file'] = {};\n          formData['fileId'] = currentItem.attachment && currentItem.attachment.id;\n        }\n      }\n\n      console.log(\"formData\", formData);\n      onSubmit(formData);\n    });\n  };\n\n  var dynamicFormItems = formItems.map(function (formItem) {\n    return /*#__PURE__*/React.createElement(Col, Object.assign({}, ColProps, {\n      key: formItem.name,\n      hidden: !(formItem.locale === null || formItem.locale === selectedFormLocale.locale),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 5\n      }\n    }), /*#__PURE__*/React.createElement(FormItem, Object.assign({\n      label: /*#__PURE__*/React.createElement(Fragment, {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 24\n        }\n      }, formItem.locale !== null && /*#__PURE__*/React.createElement(\"i\", {\n        className: \"vertical-align-middle icon icon-check-circle-o mr-1\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 7\n        }\n      }), formItem.label),\n      className: \"mb-0 \",\n      hasFeedback: true\n    }, formItemLayout, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 7\n      }\n    }), getFieldDecorator(formItem.name, _objectSpread({\n      initialValue: currentItem[formItem.name]\n    }, formItem))(formItem.obj)));\n  });\n\n  var languageMenu = function languageMenu() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"gx-popover-lang-scroll overflow-hidden\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"ul\", {\n      className: \"gx-sub-popover\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 7\n      }\n    }, locales.map(function (language) {\n      return /*#__PURE__*/React.createElement(\"li\", {\n        className: \"gx-media gx-pointer\",\n        key: JSON.stringify(language),\n        onClick: function onClick(e) {\n          return onFormLocale(language);\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"flag flag-24 gx-mr-2 flag-\".concat(language.icon),\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(\"span\", {\n        className: \"gx-language-text\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 13\n        }\n      }, language.name));\n    })));\n  };\n\n  return /*#__PURE__*/React.createElement(Modal, {\n    visible: modalVisible,\n    title: actionType === \"create\" ? intlMessages({\n      en: \"Create new certificate\",\n      ru: \"Создать новый сертификат\",\n      uz: \"Yangi sertifikat yaratish\"\n    }) : intlMessages({\n      en: \"Update certificate\",\n      ru: \"Изменить сертификат\",\n      uz: \"Sertifikatni tahrirlash\"\n    }),\n    onOk: handleOk,\n    bodyStyle: {\n      height: 420,\n      overflowY: \"auto\"\n    },\n    destroyOnClose: true,\n    width: 700,\n    onCancel: onCancel,\n    wrapClassName: 'vertical-center-modal',\n    cancelText: /*#__PURE__*/React.createElement(IntlMessages, {\n      id: 'create',\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 19\n      }\n    }),\n    okText: /*#__PURE__*/React.createElement(IntlMessages, {\n      id: 'save',\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 15\n      }\n    }),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Form, {\n    layout: \"horizontal mt-5 text-left\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    gutter: 24,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    span: 24,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"#\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"gx-header-notifications gx-ml-auto\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    className: \"gx-language\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Popover, {\n    overlayClassName: \"gx-popover-horizantal\",\n    placement: \"bottomRight\",\n    content: languageMenu(),\n    trigger: \"click\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"gx-pointer gx-flex-row gx-align-items-center\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 69\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"flag flag-24 flag-\".concat(selectedFormLocale.icon),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 78\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    className: 'gx-pl-2',\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 81\n    }\n  }, selectedFormLocale.name), /*#__PURE__*/React.createElement(\"i\", {\n    className: 'icon icon-chevron-down gx-pl-2 d-block',\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 75\n    }\n  }))))))), dynamicFormItems, /*#__PURE__*/React.createElement(FileUpload, {\n    name: \"file\",\n    title: 'File',\n    size: 50,\n    file: file,\n    onChangeFile: onChangeFile,\n    formItemLayout: formItemLayout,\n    colLayout: ColProps,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 11\n    }\n  }))));\n};\n\nmodal.propTypes = {\n  form: PropTypes.object.isRequired,\n  type: PropTypes.string,\n  item: PropTypes.object,\n  onSubmit: PropTypes.func\n};\nexport default Form.create()(modal);","map":{"version":3,"sources":["C:/Users/Ibrohim/Desktop/ark-front/src/routes/routesManagers/settings/certificate/components/Modal.js"],"names":["React","Fragment","PropTypes","Form","Modal","Popover","Row","Col","message","FileUpload","IntlMessages","intlMessages","config","locales","FormItem","Item","formItemLayout","labelCol","xs","justify","wrapperCol","ColProps","sm","md","xl","ld","modal","currentItem","onFormLocale","onSubmit","onCancel","file","onChangeFile","modalVisible","formItems","selectedFormLocale","actionType","form","getFieldDecorator","validateFields","getFieldsValue","handleOk","errors","i","error","en","ru","uz","formData","undefined","id","fileStatus","attachment","console","log","dynamicFormItems","map","formItem","name","locale","label","initialValue","obj","languageMenu","language","JSON","stringify","e","icon","height","overflowY","propTypes","object","isRequired","type","string","item","func","create"],"mappings":"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","sourcesContent":["import React, {Fragment} from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport {Form, Modal, Popover, Row, Col, message} from 'antd'\r\nimport {FileUpload} from '../../../../../components/CustomComponents'\r\nimport IntlMessages, {intlMessages} from \"../../../../../util/IntlMessages\";\r\nimport config from \"../../../../../util/config\";\r\n\r\nconst {locales} = config;\r\nconst FormItem = Form.Item;\r\nconst formItemLayout = {\r\n  labelCol: {\r\n    xs: 24,\r\n    justify: \"center\"\r\n  },\r\n  wrapperCol: {\r\n    justify: \"center\",\r\n    xs: 24,\r\n  },\r\n};\r\nconst ColProps = {\r\n  xs: 24,\r\n  sm: 24,\r\n  md: 24,\r\n  xl: 24,\r\n  ld: 24\r\n};\r\nconst modal = ({\r\n                 currentItem,\r\n                 onFormLocale,\r\n                 onSubmit,\r\n                 onCancel,\r\n                 file,\r\n                 onChangeFile,\r\n                 modalVisible,\r\n                 formItems,\r\n                 selectedFormLocale,\r\n                 actionType,\r\n                 form: {\r\n                   getFieldDecorator,\r\n                   validateFields,\r\n                   getFieldsValue,\r\n                 },\r\n               }) => {\r\n\r\n  const handleOk = () => {\r\n    validateFields((errors) => {\r\n      if (errors || file == null || file.file == null) {\r\n        for (let i in errors) {\r\n          if (i === \"titleEn\" || i === \"descriptionEn\") {\r\n            return onFormLocale(locales[0])\r\n          }\r\n        }\r\n        if (file === null || file.file === null) {\r\n          message.error(intlMessages({\r\n            en: \"File problem!\",\r\n            ru: \"Проблема с файлом!\",\r\n            uz: \"Fayl bilan bog'liq muammo!\"\r\n          }));\r\n        }\r\n\r\n        return;\r\n      }\r\n      let formData = getFieldsValue();\r\n      formData['titleRu'] = formData['titleRu'] === undefined ? formData['titleEn'] : formData['titleRu'];\r\n      formData['titleUz'] = formData['titleUz'] === undefined ? formData['titleEn'] : formData['titleUz'];\r\n      formData['descriptionRu'] = formData['descriptionRu'] === undefined ? formData['descriptionEn'] : formData['descriptionRu'];\r\n      formData['descriptionUz'] = formData['descriptionUz'] === undefined ? formData['descriptionEn'] : formData['descriptionUz'];\r\n      formData['file'] = file.file;\r\n      formData['fileUpload'] = true;\r\n      formData['type'] = true;\r\n      if (actionType === \"update\") {\r\n        formData['id'] = currentItem.id;\r\n        if (file && file.fileStatus === \"update\")\r\n          delete formData['fileId'];\r\n        if (file && file.fileStatus === \"delete\") {\r\n          delete formData['fileId'];\r\n          formData['file'] = {};\r\n        }\r\n        if (file && !file.fileStatus) {\r\n          formData['file'] = {};\r\n          formData['fileId'] = currentItem.attachment && currentItem.attachment.id;\r\n        }\r\n      }\r\n      console.log(\"formData\", formData)\r\n      onSubmit(formData)\r\n    })\r\n  };\r\n\r\n  const dynamicFormItems = formItems.map((formItem) =>\r\n    <Col {...ColProps} key={formItem.name}\r\n         hidden={!(formItem.locale === null || formItem.locale === selectedFormLocale.locale)}>\r\n      <FormItem label={<Fragment>{formItem.locale !== null &&\r\n      <i className=\"vertical-align-middle icon icon-check-circle-o mr-1\"/>}{formItem.label}</Fragment>}\r\n                className=\"mb-0 \" hasFeedback {...formItemLayout}>\r\n        {getFieldDecorator(formItem.name, {\r\n          initialValue: currentItem[formItem.name],\r\n          ...formItem\r\n        })(formItem.obj)}\r\n      </FormItem>\r\n    </Col>\r\n  );\r\n  const languageMenu = () => (\r\n    <div className=\"gx-popover-lang-scroll overflow-hidden\">\r\n      <ul className=\"gx-sub-popover\">\r\n        {locales.map(language =>\r\n          <li className=\"gx-media gx-pointer\" key={JSON.stringify(language)}\r\n              onClick={(e) => onFormLocale(language)}>\r\n            <i className={`flag flag-24 gx-mr-2 flag-${language.icon}`}/>\r\n            <span className=\"gx-language-text\">{language.name}</span>\r\n          </li>\r\n        )}\r\n      </ul>\r\n    </div>);\r\n\r\n\r\n  return (\r\n    <Modal\r\n      visible={modalVisible}\r\n      title={actionType === \"create\" ?\r\n        intlMessages({\r\n          en: \"Create new certificate\",\r\n          ru: \"Создать новый сертификат\",\r\n          uz: \"Yangi sertifikat yaratish\"\r\n        })\r\n        :\r\n        intlMessages({en: \"Update certificate\", ru: \"Изменить сертификат\", uz: \"Sertifikatni tahrirlash\"})}\r\n      onOk={handleOk}\r\n      bodyStyle={{height: 420, overflowY: \"auto\"}}\r\n      destroyOnClose={true}\r\n      width={700}\r\n      onCancel={onCancel}\r\n      wrapClassName={'vertical-center-modal'}\r\n      cancelText={<IntlMessages id={'create'}/>}\r\n      okText={<IntlMessages id={'save'}/>}\r\n    >\r\n      <Form layout=\"horizontal mt-5 text-left\">\r\n        <Row gutter={24}>\r\n          <Col span={24}>\r\n            <div className=\"#\">\r\n              <ul className=\"gx-header-notifications gx-ml-auto\">\r\n                <li className=\"gx-language\">\r\n                  <Popover overlayClassName=\"gx-popover-horizantal\" placement=\"bottomRight\"\r\n                           content={languageMenu()} trigger=\"click\"><span\r\n                    className=\"gx-pointer gx-flex-row gx-align-items-center\"><i\r\n                    className={`flag flag-24 flag-${selectedFormLocale.icon}`}/><span\r\n                    className={'gx-pl-2'}>{selectedFormLocale.name}</span><i\r\n                    className={'icon icon-chevron-down gx-pl-2 d-block'}/></span></Popover>\r\n                </li>\r\n              </ul>\r\n            </div>\r\n          </Col>\r\n          {dynamicFormItems}\r\n          <FileUpload\r\n            name={\"file\"}\r\n            title={'File'}\r\n            size={50}\r\n            file={file}\r\n            onChangeFile={onChangeFile}\r\n            formItemLayout={formItemLayout}\r\n            colLayout={ColProps}\r\n          />\r\n        </Row>\r\n      </Form>\r\n    </Modal>\r\n  )\r\n};\r\n\r\nmodal.propTypes = {\r\n  form: PropTypes.object.isRequired,\r\n  type: PropTypes.string,\r\n  item: PropTypes.object,\r\n  onSubmit: PropTypes.func,\r\n};\r\n\r\nexport default Form.create()(modal)\r\n"]},"metadata":{},"sourceType":"module"}