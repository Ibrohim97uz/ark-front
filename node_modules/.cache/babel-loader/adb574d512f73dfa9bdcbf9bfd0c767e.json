{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\Ibrohim\\\\Desktop\\\\ark-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\Ibrohim\\\\Desktop\\\\ark-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"C:\\\\Users\\\\Ibrohim\\\\Desktop\\\\ark-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"C:\\\\Users\\\\Ibrohim\\\\Desktop\\\\ark-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _createSuper from \"C:\\\\Users\\\\Ibrohim\\\\Desktop\\\\ark-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";\nimport _objectWithoutProperties from \"C:\\\\Users\\\\Ibrohim\\\\Desktop\\\\ark-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectWithoutProperties\";\nvar _excluded = [\"component\", \"authUser\"];\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\Ibrohim\\\\Desktop\\\\ark-front\\\\src\\\\containers\\\\App\\\\index.js\";\n\nimport React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport URLSearchParams from 'url-search-params';\nimport { Redirect, Route, Switch } from \"react-router-dom\";\nimport { ConfigProvider } from \"antd\";\nimport { IntlProvider } from \"react-intl\";\nimport AppLocale from \"locales\";\nimport config from \"../../util/config\";\nimport MainApp from \"./MainApp\";\nimport Login from \"../../routes/login\";\nimport NotFound404 from \"../../routes/404\";\nimport ClientApp from \"./ClientApp\";\nimport { onLayoutTypeChange, onNavStyleChange, setThemeType, updateState } from \"../../redux/setting/action\";\nimport { onAuthUser } from \"../../redux/auth/action\";\nimport { LAYOUT_TYPE_BOXED, LAYOUT_TYPE_FRAMED, LAYOUT_TYPE_FULL, NAV_STYLE_ABOVE_HEADER, NAV_STYLE_BELOW_HEADER, NAV_STYLE_DARK_HORIZONTAL, NAV_STYLE_DEFAULT_HORIZONTAL, NAV_STYLE_INSIDE_HEADER_HORIZONTAL } from \"../../constants/ThemeSetting\";\nimport ApiRequest from \"../../services\";\nimport api from \"../../services/app\";\nimport { TOKEN_NAME } from \"../../util/constants\";\nvar getResume = api.getResume,\n    getSuggestionAndQuestion = api.getSuggestionAndQuestion,\n    userMe = api.userMe;\nvar openPages = config.openPages,\n    adminPages = config.adminPages,\n    moderatorPages = config.moderatorPages;\n\nvar RestrictedRoute = function RestrictedRoute(_ref) {\n  var Component = _ref.component,\n      authUser = _ref.authUser,\n      rest = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(Route, Object.assign({}, rest, {\n    render: function render(props) {\n      return /*#__PURE__*/React.createElement(Component, Object.assign({}, props, {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 34,\n          columnNumber: 36\n        }\n      }));\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 3\n    }\n  }));\n};\n\nvar App = /*#__PURE__*/function (_Component) {\n  _inherits(App, _Component);\n\n  var _super = _createSuper(App);\n\n  function App(props) {\n    var _this2;\n\n    _classCallCheck(this, App);\n\n    _this2 = _super.call(this, props);\n\n    _this2.setLayoutType = function (layoutType) {\n      if (layoutType === LAYOUT_TYPE_FULL) {\n        document.body.classList.remove('boxed-layout');\n        document.body.classList.remove('framed-layout');\n        document.body.classList.add('full-layout');\n      } else if (layoutType === LAYOUT_TYPE_BOXED) {\n        document.body.classList.remove('full-layout');\n        document.body.classList.remove('framed-layout');\n        document.body.classList.add('boxed-layout');\n      } else if (layoutType === LAYOUT_TYPE_FRAMED) {\n        document.body.classList.remove('boxed-layout');\n        document.body.classList.remove('full-layout');\n        document.body.classList.add('framed-layout');\n      }\n    };\n\n    _this2.setNavStyle = function (navStyle) {\n      if (navStyle === NAV_STYLE_DEFAULT_HORIZONTAL || navStyle === NAV_STYLE_DARK_HORIZONTAL || navStyle === NAV_STYLE_INSIDE_HEADER_HORIZONTAL || navStyle === NAV_STYLE_ABOVE_HEADER || navStyle === NAV_STYLE_BELOW_HEADER) {\n        document.body.classList.add('full-scroll');\n        document.body.classList.add('horizontal-layout');\n      } else {\n        document.body.classList.remove('full-scroll');\n        document.body.classList.remove('horizontal-layout');\n      }\n    };\n\n    _this2.getData = function () {\n      _this2.getInit();\n    };\n\n    _this2.getUserMe = function () {\n      ApiRequest(userMe).then(function (result) {\n        if (result.success) {\n          _this2.props.onAuthUser(result.object);\n        } else {\n          _this2.setState({\n            auth: true\n          });\n\n          localStorage.removeItem(TOKEN_NAME);\n\n          _this2.props.onAuthUser(null);\n        }\n      });\n    };\n\n    _this2.getInit = function () {\n      ApiRequest(getResume).then(function (result) {\n        if (result.success) {\n          _this2.props.updateState({\n            resume: result.object\n          });\n        }\n      });\n      ApiRequest(getSuggestionAndQuestion).then(function (result) {\n        if (result.success) {\n          _this2.props.updateState({\n            suggestionAndQuestion: result.object\n          });\n        }\n      });\n    };\n\n    _this2.getInitPage = function (path) {\n      // if (path.includes('/login') && this.state.auth){\n      //   return  <Route exact path={'/login'} component={Login}/>\n      // }\n      if (openPages.includes(path) || path.includes('/service/') || path.includes('/news/') || path.includes('/blog/')) {\n        return /*#__PURE__*/React.createElement(Route, {\n          exact: true,\n          path: '/**',\n          component: ClientApp,\n          __self: _assertThisInitialized(_this2),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 16\n          }\n        });\n      }\n\n      if (_this2.props.authUser !== null && _this2.props.authUser.roles[0].name === \"ROLE_ADMIN\" && adminPages.includes(path) + '||' + path.includes(\"/main/client/\")) {\n        return /*#__PURE__*/React.createElement(RestrictedRoute, {\n          path: \"\".concat(_this2.props.match.url),\n          authUser: _this2.props.authUser,\n          component: MainApp,\n          __self: _assertThisInitialized(_this2),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 140,\n            columnNumber: 14\n          }\n        });\n      }\n\n      if (_this2.props.authUser !== null && _this2.props.authUser.roles[0].name === \"ROLE_MODERATOR\" && moderatorPages.includes(path) + '||' + path.includes(\"/main/client/\")) {\n        return /*#__PURE__*/React.createElement(RestrictedRoute, {\n          path: \"\".concat(_this2.props.match.url),\n          authUser: _this2.props.authUser,\n          component: MainApp,\n          __self: _assertThisInitialized(_this2),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 14\n          }\n        });\n      }\n\n      if (_this2.props.authUser === null && path === \"/login\" && !openPages.includes(path) + '&&' + (!path.includes('/service/') + '||' + !path.includes('/news/') + '||' + !path.includes('/blog/'))) {\n        return /*#__PURE__*/React.createElement(Route, {\n          exact: true,\n          path: path,\n          component: NotFound404,\n          __self: _assertThisInitialized(_this2),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 149,\n            columnNumber: 14\n          }\n        });\n      }\n\n      if (_this2.props.authUser + '!==' + null && !openPages.includes(path) + '&&' + (!path.includes('/service/') + '||' + !path.includes('/news/') + '||' + !path.includes('/blog/'))) {\n        return /*#__PURE__*/React.createElement(Route, {\n          exact: true,\n          path: path,\n          component: NotFound404,\n          __self: _assertThisInitialized(_this2),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 14\n          }\n        });\n      }\n    };\n\n    _this2.state = {\n      auth: false\n    };\n    _this2.getInitPage = _this2.getInitPage.bind(_assertThisInitialized(_this2));\n    return _this2;\n  }\n\n  _createClass(App, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (this.props.location.pathname === \"/login\" || adminPages.includes(this.props.location.pathname) || moderatorPages.includes(this.props.location.pathname) || this.props.location.pathname.includes(\"/main/client/\")) {\n        this.getUserMe();\n      }\n\n      if (this.props.location.pathname !== \"/login\" || adminPages.includes(this.props.location.pathname) || moderatorPages.includes(this.props.location.pathname) || this.props.location.pathname.includes(\"/main/client/\")) {\n        this.getData();\n      }\n\n      var params = new URLSearchParams(this.props.location.search);\n\n      if (params.has(\"theme\")) {\n        this.props.setThemeType(params.get('theme'));\n      }\n\n      if (params.has(\"nav-style\")) {\n        this.props.onNavStyleChange(params.get('nav-style'));\n      }\n\n      if (params.has(\"layout-type\")) {\n        this.props.onLayoutTypeChange(params.get('layout-type'));\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          location = _this$props.location,\n          layoutType = _this$props.layoutType,\n          navStyle = _this$props.navStyle,\n          locale = _this$props.locale,\n          authUser = _this$props.authUser;\n\n      if (authUser && location.pathname === '/login') {\n        return /*#__PURE__*/React.createElement(Redirect, {\n          to: '/main/dashboard',\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 162,\n            columnNumber: 14\n          }\n        });\n      }\n\n      if (location.pathname === '/' || location.pathname === '') {\n        return /*#__PURE__*/React.createElement(Redirect, {\n          to: '/home',\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 165,\n            columnNumber: 15\n          }\n        });\n      }\n\n      this.setLayoutType(layoutType);\n      this.setNavStyle(navStyle);\n      var currentAppLocale = AppLocale[locale.locale];\n      return /*#__PURE__*/React.createElement(ConfigProvider, {\n        locale: currentAppLocale.antd,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(IntlProvider, {\n        locale: currentAppLocale.locale,\n        messages: currentAppLocale.messages,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Switch, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Route, {\n        exact: true,\n        path: '/login',\n        component: Login,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 13\n        }\n      }), this.getInitPage(location.pathname))));\n    }\n  }]);\n\n  return App;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(_ref2) {\n  var settings = _ref2.settings,\n      auth = _ref2.auth;\n  var locale = settings.locale,\n      navStyle = settings.navStyle,\n      layoutType = settings.layoutType;\n  var authUser = auth.authUser,\n      initURL = auth.initURL;\n  return {\n    locale: locale,\n    navStyle: navStyle,\n    layoutType: layoutType,\n    authUser: authUser,\n    initURL: initURL\n  };\n};\n\nexport default connect(mapStateToProps, {\n  setThemeType: setThemeType,\n  onNavStyleChange: onNavStyleChange,\n  onLayoutTypeChange: onLayoutTypeChange,\n  onAuthUser: onAuthUser,\n  updateState: updateState\n})(App);","map":{"version":3,"sources":["C:/Users/Ibrohim/Desktop/ark-front/src/containers/App/index.js"],"names":["React","Component","connect","URLSearchParams","Redirect","Route","Switch","ConfigProvider","IntlProvider","AppLocale","config","MainApp","Login","NotFound404","ClientApp","onLayoutTypeChange","onNavStyleChange","setThemeType","updateState","onAuthUser","LAYOUT_TYPE_BOXED","LAYOUT_TYPE_FRAMED","LAYOUT_TYPE_FULL","NAV_STYLE_ABOVE_HEADER","NAV_STYLE_BELOW_HEADER","NAV_STYLE_DARK_HORIZONTAL","NAV_STYLE_DEFAULT_HORIZONTAL","NAV_STYLE_INSIDE_HEADER_HORIZONTAL","ApiRequest","api","TOKEN_NAME","getResume","getSuggestionAndQuestion","userMe","openPages","adminPages","moderatorPages","RestrictedRoute","component","authUser","rest","props","App","setLayoutType","layoutType","document","body","classList","remove","add","setNavStyle","navStyle","getData","getInit","getUserMe","then","result","success","object","setState","auth","localStorage","removeItem","resume","suggestionAndQuestion","getInitPage","path","includes","roles","name","match","url","state","bind","location","pathname","params","search","has","get","locale","currentAppLocale","antd","messages","mapStateToProps","settings","initURL"],"mappings":"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","sourcesContent":["import React, {Component} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport URLSearchParams from 'url-search-params'\r\nimport { Redirect, Route, Switch} from \"react-router-dom\";\r\nimport {ConfigProvider} from \"antd\";\r\nimport {IntlProvider} from \"react-intl\";\r\nimport AppLocale from \"locales\";\r\nimport config from \"../../util/config\"\r\nimport MainApp from \"./MainApp\";\r\nimport Login from \"../../routes/login\";\r\nimport NotFound404 from \"../../routes/404\";\r\nimport ClientApp from \"./ClientApp\";\r\nimport {onLayoutTypeChange, onNavStyleChange, setThemeType,updateState} from \"../../redux/setting/action\";\r\nimport {onAuthUser} from \"../../redux/auth/action\";\r\n\r\nimport {\r\n  LAYOUT_TYPE_BOXED,\r\n  LAYOUT_TYPE_FRAMED,\r\n  LAYOUT_TYPE_FULL,\r\n  NAV_STYLE_ABOVE_HEADER,\r\n  NAV_STYLE_BELOW_HEADER,\r\n  NAV_STYLE_DARK_HORIZONTAL,\r\n  NAV_STYLE_DEFAULT_HORIZONTAL,\r\n  NAV_STYLE_INSIDE_HEADER_HORIZONTAL\r\n} from \"../../constants/ThemeSetting\";\r\nimport ApiRequest from \"../../services\";\r\n\r\nimport api from \"../../services/app\"\r\nimport {TOKEN_NAME} from \"../../util/constants\";\r\nconst { getResume, getSuggestionAndQuestion,userMe} = api;\r\n\r\nconst {openPages, adminPages, moderatorPages} = config;\r\nconst RestrictedRoute = ({component: Component, authUser, ...rest}) => (\r\n  <Route{...rest} render={props => <Component {...props} />}/>);\r\n\r\n\r\nclass App extends Component {\r\n  constructor(props){\r\n    super(props);\r\n    this.state={\r\n      auth:false\r\n    };\r\n    this.getInitPage = this.getInitPage.bind(this);\r\n  }\r\n\r\n  setLayoutType = (layoutType) => {\r\n    if (layoutType === LAYOUT_TYPE_FULL) {\r\n      document.body.classList.remove('boxed-layout');\r\n      document.body.classList.remove('framed-layout');\r\n      document.body.classList.add('full-layout');\r\n    } else if (layoutType === LAYOUT_TYPE_BOXED) {\r\n      document.body.classList.remove('full-layout');\r\n      document.body.classList.remove('framed-layout');\r\n      document.body.classList.add('boxed-layout');\r\n    } else if (layoutType === LAYOUT_TYPE_FRAMED) {\r\n      document.body.classList.remove('boxed-layout');\r\n      document.body.classList.remove('full-layout');\r\n      document.body.classList.add('framed-layout');\r\n    }\r\n  };\r\n\r\n  setNavStyle = (navStyle) => {\r\n    if (navStyle === NAV_STYLE_DEFAULT_HORIZONTAL ||\r\n      navStyle === NAV_STYLE_DARK_HORIZONTAL ||\r\n      navStyle === NAV_STYLE_INSIDE_HEADER_HORIZONTAL ||\r\n      navStyle === NAV_STYLE_ABOVE_HEADER ||\r\n      navStyle === NAV_STYLE_BELOW_HEADER) {\r\n      document.body.classList.add('full-scroll');\r\n      document.body.classList.add('horizontal-layout');\r\n    } else {\r\n      document.body.classList.remove('full-scroll');\r\n      document.body.classList.remove('horizontal-layout');\r\n    }\r\n  };\r\n\r\n  componentDidMount() {\r\n    if (this.props.location.pathname===\"/login\" || adminPages.includes(this.props.location.pathname) || moderatorPages.includes(this.props.location.pathname) || this.props.location.pathname.includes(\"/main/client/\") ){\r\n      this.getUserMe();\r\n    }\r\n    if (this.props.location.pathname!==\"/login\" || adminPages.includes(this.props.location.pathname) || moderatorPages.includes(this.props.location.pathname) || this.props.location.pathname.includes(\"/main/client/\") ){\r\n      this.getData();\r\n    }\r\n    const params = new URLSearchParams(this.props.location.search);\r\n\r\n    if (params.has(\"theme\")) {\r\n      this.props.setThemeType(params.get('theme'));\r\n    }\r\n    if (params.has(\"nav-style\")) {\r\n      this.props.onNavStyleChange(params.get('nav-style'));\r\n    }\r\n    if (params.has(\"layout-type\")) {\r\n      this.props.onLayoutTypeChange(params.get('layout-type'));\r\n    }\r\n\r\n  }\r\n\r\n  getData=()=>{\r\n      this.getInit()\r\n  }\r\n\r\n\r\n\r\n  getUserMe = () => {\r\n    ApiRequest(userMe).then((result) => {\r\n      if (result.success) {\r\n        this.props.onAuthUser(result.object);\r\n      } else {\r\n        this.setState({\r\n          auth:true\r\n        });\r\n        localStorage.removeItem(TOKEN_NAME);\r\n        this.props.onAuthUser(null);\r\n      }\r\n    })\r\n  };\r\n\r\n\r\n  getInit = () => {\r\n    ApiRequest(getResume).then((result) => {\r\n      if (result.success) {\r\n        this.props.updateState({resume:result.object});\r\n      }\r\n    });\r\n    ApiRequest(getSuggestionAndQuestion).then((result) => {\r\n      if (result.success) {\r\n        this.props.updateState({suggestionAndQuestion:result.object});\r\n      }\r\n    });\r\n  }\r\n\r\n  getInitPage = (path) => {\r\n    // if (path.includes('/login') && this.state.auth){\r\n    //   return  <Route exact path={'/login'} component={Login}/>\r\n    // }\r\n    if (openPages.includes(path) || path.includes('/service/') || path.includes('/news/') || path.includes('/blog/')) {\r\n      return   <Route exact path={'/**'} component={ClientApp}/>\r\n    }\r\n\r\n    if (this.props.authUser !== null && this.props.authUser.roles[0].name === \"ROLE_ADMIN\" &&  adminPages.includes(path) + '||'+  path.includes(\"/main/client/\")) {\r\n      return <RestrictedRoute path={`${this.props.match.url}`} authUser={this.props.authUser}\r\n                              component={MainApp}/>\r\n    }\r\n    if (this.props.authUser !== null &&  this.props.authUser.roles[0].name === \"ROLE_MODERATOR\" &&  moderatorPages.includes(path) + '||'+  path.includes(\"/main/client/\")) {\r\n      return <RestrictedRoute path={`${this.props.match.url}`} authUser={this.props.authUser}\r\n                              component={MainApp}/>\r\n    }\r\n\r\n    if (this.props.authUser === null && path===\"/login\" &&  !openPages.includes(path) + '&&'+  (!path.includes('/service/') + '||'+  !path.includes('/news/') + '||'+  !path.includes('/blog/'))) {\r\n      return <Route exact path={path} component={NotFound404}/>\r\n    }\r\n\r\n    if (this.props.authUser +'!=='+ null && !openPages.includes(path) + '&&'+  (!path.includes('/service/') + '||'+  !path.includes('/news/') + '||'+  !path.includes('/blog/'))) {\r\n      return <Route exact path={path} component={NotFound404}/>\r\n    }\r\n\r\n  };\r\n\r\n\r\n  render() {\r\n    const {location, layoutType, navStyle, locale,authUser} = this.props;\r\n    if (authUser && location.pathname==='/login'){\r\n      return <Redirect to={'/main/dashboard'}/>\r\n    }\r\n    if (location.pathname === '/' ||  location.pathname === '') {\r\n      return (<Redirect to={'/home'}/>);\r\n    }\r\n\r\n    this.setLayoutType(layoutType);\r\n\r\n    this.setNavStyle(navStyle);\r\n    const currentAppLocale = AppLocale[locale.locale];\r\n    return (\r\n      <ConfigProvider locale={currentAppLocale.antd}>\r\n        <IntlProvider\r\n          locale={currentAppLocale.locale}\r\n          messages={currentAppLocale.messages}>\r\n          <Switch>\r\n            <Route exact path={'/login'} component={Login}/>\r\n            {this.getInitPage(location.pathname)}\r\n          </Switch>\r\n        </IntlProvider>\r\n      </ConfigProvider>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = ({settings, auth}) => {\r\n  const {locale, navStyle, layoutType} = settings;\r\n  const {authUser, initURL} = auth;\r\n  return {locale, navStyle, layoutType, authUser, initURL}\r\n};\r\nexport default connect(mapStateToProps, {\r\n  setThemeType,\r\n  onNavStyleChange,\r\n  onLayoutTypeChange,\r\n  onAuthUser,\r\n  updateState\r\n})(App);\r\n"]},"metadata":{},"sourceType":"module"}