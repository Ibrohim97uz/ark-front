{"ast":null,"code":"import _objectSpread from\"C:\\\\Users\\\\Ibrohim\\\\Desktop\\\\ark-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"C:\\\\Users\\\\Ibrohim\\\\Desktop\\\\ark-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\Ibrohim\\\\Desktop\\\\ark-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\Ibrohim\\\\Desktop\\\\ark-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\Ibrohim\\\\Desktop\\\\ark-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{Card,Input,notification,Tag}from\"antd/lib/index\";import{EditorState,ContentState,convertFromHTML}from'draft-js';import ApiRequest from\"../../../../services\";import api from'../../../../services/app';import Filter from'./components/Filter';import Modal from'./components/Modal';import List from'./components/List';import IntlMessages,{intlMessages}from\"../../../../util/IntlMessages\";import{FileView}from\"../../../../components/CustomComponents\";import{apiFileUrl}from\"../../../../util/constants\";var getService=api.getService,postService=api.postService,putService=api.putService,deleteService=api.deleteService;var Certificates=/*#__PURE__*/function(_Component){_inherits(Certificates,_Component);var _super=_createSuper(Certificates);function Certificates(props){var _this;_classCallCheck(this,Certificates);_this=_super.call(this,props);_this.onStartEvent=function(payload){ApiRequest(getService).then(function(result){if(result.success){_this.setState(function(state,props){return{list:result.object,pagination:_objectSpread(_objectSpread({},state.pagination),{},{total:result.object.totalElements})};});}});};_this.onRequestFunc=function(path,data,message){ApiRequest(path,data).then(function(result){if(result.success){_this.setState({actionType:'create',modalVisible:false,currentItem:{},text:{en:\"\",ru:\"\",uz:\"\"},file:null});notification.success({key:message.key,message:message.messageSuccess,description:message.descriptionSuccess});_this.onCancel();_this.onStartEvent();}else{notification.error({key:message.key,message:message.messageError,description:message.descriptionError});}});};_this.onFormLocale=function(dataItem){return _this.setState({selectedFormLocale:dataItem});};_this.onSubmit=function(data){var message={};if(_this.state.actionType===\"create\"){message={key:\"create\",messageError:intlMessages({en:\"There was an error creating\",ru:\"Произошла ошибка при создании\",uz:\"Yaratishda xatolik yuz berdi\"}),messageSuccess:intlMessages({en:\"Successfully created\",ru:\"Успешно создан\",uz:\"Muvaffaqqiyatli yaratildi\"})};_this.onRequestFunc(postService,data,message);}if(_this.state.actionType===\"update\"){message={key:\"update\",messageError:intlMessages({en:\"There was an error updating\",ru:\"Произошла ошибка при изменение\",uz:\"Tahrirlashda xatolik yuz berdi\"}),messageSuccess:intlMessages({en:\"Successfully updated\",ru:\"Успешно изменено\",uz:\"Muvaffaqqiyatli tahrirlandi\"})};_this.onRequestFunc(putService,_objectSpread({id:_this.state.currentItem.id},data),message);}};_this.onCancel=function(){_this.setState({modalVisible:false,actionType:'create',videos:[],files:[],file:null,text:{en:\"\",ru:\"\",uz:\"\"},selectedFormLocale:{languageId:'nameEn',locale:'en',name:'English',icon:'us'}});};_this.onAdd=function(){_this.setState({modalVisible:true,actionType:'create'});};_this.onDelete=function(dataItemId){var message={key:\"delete\",messageError:intlMessages({en:\"There was an error deleting\",ru:\"Произошла ошибка при удалении\",uz:\"O'chirishda xatolik yuz berdi\"}),messageSuccess:intlMessages({en:\"Successfully deleted\",ru:\"Успешно удален\",uz:\"Muvaffaqqiyatli o'chirildi\"})};_this.onRequestFunc(deleteService,{id:dataItemId},message);};_this.onChangeFile=function(file){_this.setState({file:file});};_this.onChangeAnyFile=function(files){_this.setState({files:files});};_this.onChangeAnyFileVideo=function(files){_this.setState({videos:files});};_this.onEditItem=function(dataItem){var files=[];var videos=[];if(dataItem['otherAttachmentList'].length!==0){dataItem['otherAttachmentList'].map(function(item){return files.push({fileUrl:apiFileUrl+item.id,file:item,fileStatus:\"create\"});});}if(dataItem['videos'].length!==0){dataItem['videos'].map(function(item){return videos.push({fileUrl:apiFileUrl+item.id,file:item,fileStatus:\"create\"});});}_this.setState({actionType:\"update\",text:{en:EditorState.createWithContent(ContentState.createFromBlockArray(convertFromHTML(dataItem.textEn))),ru:EditorState.createWithContent(ContentState.createFromBlockArray(convertFromHTML(dataItem.textRu))),uz:EditorState.createWithContent(ContentState.createFromBlockArray(convertFromHTML(dataItem.textUz)))},currentItem:dataItem,files:files,videos:videos,file:dataItem.mainAttachment?{fileUrl:apiFileUrl+dataItem.mainAttachment.id,file:dataItem.mainAttachment,fileStatus:\"create\"}:null,modalVisible:true});};_this.onTextChange=function(e){var _this$state=_this.state,text=_this$state.text,selectedFormLocale=_this$state.selectedFormLocale;text[selectedFormLocale['locale']]=e;_this.setState({text:text});};_this.state={actionType:'create',modalVisible:false,columns:[{title:/*#__PURE__*/React.createElement(\"strong\",null,\"\\u2116\"),key:\"№\",align:\"center\",width:60,render:function render(text,record,index){return index+1;}},{title:/*#__PURE__*/React.createElement(IntlMessages,{id:'attachment'}),key:\"file\",align:\"center\",width:100,render:function render(text,record,index){return/*#__PURE__*/React.createElement(FileView,{fileId:record.mainAttachment&&record.mainAttachment.id,defaultView:\"picture\"});}},intlMessages({en:{title:\"Title\",dataIndex:'titleEn',align:\"center\",key:'titleEn',width:200},ru:{title:\"Название\",dataIndex:'titleRu',align:\"center\",key:'titleRu',width:200},uz:{title:\"Sarlavha\",dataIndex:'titleUz',align:\"center\",key:'titleUz',width:200}}),{title:intlMessages({en:\"Description\",ru:\"Описание\",uz:\"Ta'rif\"}),key:\"text\",render:function render(text,record,index){return/*#__PURE__*/React.createElement(\"div\",{className:'text-block-table',dangerouslySetInnerHTML:{__html:intlMessages({en:record.textEn,ru:record.textRu,uz:record.textUz})}});}},{title:/*#__PURE__*/React.createElement(IntlMessages,{id:\"isActive\"}),dataIndex:'isActive',align:\"center\",key:'isActive',render:function render(text,record){return/*#__PURE__*/React.createElement(\"div\",null,record.isStatus===true?/*#__PURE__*/React.createElement(Tag,{color:\"#87d068\"},/*#__PURE__*/React.createElement(IntlMessages,{id:\"enabled\"})):/*#__PURE__*/React.createElement(Tag,{color:\"#f50\"},/*#__PURE__*/React.createElement(IntlMessages,{id:\"disabled\"})));}}],formItems:[{label:\"Title\",name:'titleEn',rules:[{required:true,message:/*#__PURE__*/React.createElement(IntlMessages,{id:\"E_ERROR\"})}],locale:\"en\",obj:/*#__PURE__*/React.createElement(Input,null)},{label:\"Название\",name:'titleRu',locale:\"ru\",obj:/*#__PURE__*/React.createElement(Input,null)},{label:\"Sarlavha\",name:'titleUz',locale:\"uz\",obj:/*#__PURE__*/React.createElement(Input,null)}],currentItem:{},list:[],pagination:{showSizeChanger:true,showQuickJumper:true,showTotal:function showTotal(total){return\"Total \".concat(total,\" Items\");},current:1,total:0,pageSize:20},selectedFormLocale:{languageId:'nameEn',locale:'en',name:'English',icon:'us'},file:null,files:[],videos:[],text:{en:\"\",ru:\"\",uz:\"\"}};return _this;}_createClass(Certificates,[{key:\"componentDidMount\",value:function componentDidMount(){this.onStartEvent();}},{key:\"render\",value:function render(){var _this$state2=this.state,currentItem=_this$state2.currentItem,modalVisible=_this$state2.modalVisible,text=_this$state2.text,file=_this$state2.file,files=_this$state2.files,videos=_this$state2.videos,columns=_this$state2.columns,formItems=_this$state2.formItems,list=_this$state2.list,actionType=_this$state2.actionType,pagination=_this$state2.pagination,selectedFormLocale=_this$state2.selectedFormLocale;return/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(Filter,{onAdd:this.onAdd}),/*#__PURE__*/React.createElement(List,{visibleColumns:columns,dataSource:list,onEditItem:this.onEditItem,pagination:pagination.total>=10?_objectSpread({},pagination):false,onDeleteItem:this.onDelete}),/*#__PURE__*/React.createElement(Modal,{onSubmit:this.onSubmit,onCancel:this.onCancel,onChangeFile:this.onChangeFile,onChangeAnyFile:this.onChangeAnyFile,onChangeAnyFileVideo:this.onChangeAnyFileVideo,onFormLocale:this.onFormLocale,onTextChange:this.onTextChange,file:file,files:files,videos:videos,text:text,modalVisible:modalVisible,selectedFormLocale:selectedFormLocale,formItems:formItems,actionType:actionType,currentItem:actionType==='create'?{}:currentItem}));}}]);return Certificates;}(Component);export default Certificates;","map":{"version":3,"sources":["C:/Users/Ibrohim/Desktop/ark-front/src/routes/routesManagers/settings/services/index.js"],"names":["React","Component","Card","Input","notification","Tag","EditorState","ContentState","convertFromHTML","ApiRequest","api","Filter","Modal","List","IntlMessages","intlMessages","FileView","apiFileUrl","getService","postService","putService","deleteService","Certificates","props","onStartEvent","payload","then","result","success","setState","state","list","object","pagination","total","totalElements","onRequestFunc","path","data","message","actionType","modalVisible","currentItem","text","en","ru","uz","file","key","messageSuccess","description","descriptionSuccess","onCancel","error","messageError","descriptionError","onFormLocale","dataItem","selectedFormLocale","onSubmit","id","videos","files","languageId","locale","name","icon","onAdd","onDelete","dataItemId","onChangeFile","onChangeAnyFile","onChangeAnyFileVideo","onEditItem","length","map","item","push","fileUrl","fileStatus","createWithContent","createFromBlockArray","textEn","textRu","textUz","mainAttachment","onTextChange","e","columns","title","align","width","render","record","index","dataIndex","__html","isStatus","formItems","label","rules","required","obj","showSizeChanger","showQuickJumper","showTotal","current","pageSize"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { Card, Input, notification, Tag } from \"antd/lib/index\";\r\nimport { EditorState, ContentState, convertFromHTML } from 'draft-js'\r\n\r\nimport ApiRequest from \"../../../../services\";\r\nimport api from '../../../../services/app'\r\nimport Filter from './components/Filter'\r\nimport Modal from './components/Modal'\r\nimport List from './components/List'\r\nimport IntlMessages, { intlMessages } from \"../../../../util/IntlMessages\";\r\nimport { FileView } from \"../../../../components/CustomComponents\";\r\nimport {apiFileUrl} from \"../../../../util/constants\";\r\n\r\nconst { getService, postService, putService, deleteService } = api;\r\n\r\nclass Certificates extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            actionType: 'create',\r\n            modalVisible: false,\r\n            columns: [{\r\n                title: <strong>№</strong>,\r\n                key: \"№\",\r\n                align: \"center\",\r\n                width: 60,\r\n                render: (text, record, index) => index + 1,\r\n            },\r\n                {\r\n                    title: <IntlMessages id={'attachment'} />,\r\n                    key: \"file\",\r\n                    align: \"center\",\r\n                    width: 100,\r\n                    render: (text, record, index) => (\r\n                        <FileView fileId={record.mainAttachment && record.mainAttachment.id} defaultView={\"picture\"} />)\r\n\r\n                },\r\n                (intlMessages({\r\n                    en: {\r\n                        title: \"Title\",\r\n                        dataIndex: 'titleEn',\r\n                        align: \"center\",\r\n                        key: 'titleEn',\r\n                        width: 200,\r\n                    }, ru: {\r\n                        title: \"Название\",\r\n                        dataIndex: 'titleRu',\r\n                        align: \"center\",\r\n                        key: 'titleRu',\r\n                        width: 200,\r\n                    },\r\n                    uz: {\r\n                        title: \"Sarlavha\",\r\n                        dataIndex: 'titleUz',\r\n                        align: \"center\",\r\n                        key: 'titleUz',\r\n                        width: 200,\r\n                    }\r\n                })),\r\n                {\r\n                    title: (intlMessages({ en: \"Description\", ru: \"Описание\", uz: \"Ta'rif\" })),\r\n                    key: \"text\",\r\n                    render: (text, record, index) => (<div className={'text-block-table'} dangerouslySetInnerHTML={{\r\n                        __html: (intlMessages({\r\n                            en: record.textEn,\r\n                            ru: record.textRu,\r\n                            uz: record.textUz\r\n                        }))\r\n                    }} />),\r\n                },\r\n                {\r\n                    title: <IntlMessages id=\"isActive\" />,\r\n                    dataIndex: 'isActive',\r\n                    align: \"center\",\r\n                    key: 'isActive',\r\n                    render: (text, record) => {\r\n                        return (\r\n                            <div>{record.isStatus === true ? <Tag color=\"#87d068\"><IntlMessages id=\"enabled\" /></Tag> :\r\n                                <Tag color=\"#f50\"><IntlMessages id=\"disabled\" /></Tag>}</div>)\r\n                    }\r\n                },\r\n\r\n            ],\r\n            formItems: [\r\n                {\r\n                    label: \"Title\",\r\n                    name: 'titleEn',\r\n                    rules: [\r\n                        {\r\n                            required: true,\r\n                            message: <IntlMessages id=\"E_ERROR\" />\r\n\r\n                        },\r\n                    ],\r\n                    locale: \"en\",\r\n                    obj: <Input />\r\n                },\r\n                {\r\n                    label: \"Название\",\r\n                    name: 'titleRu',\r\n                    locale: \"ru\",\r\n                    obj: <Input />\r\n                },\r\n                {\r\n                    label: \"Sarlavha\",\r\n                    name: 'titleUz',\r\n                    locale: \"uz\",\r\n                    obj: <Input />\r\n                },\r\n            ],\r\n            currentItem: {},\r\n            list: [],\r\n            pagination: {\r\n                showSizeChanger: true,\r\n                showQuickJumper: true,\r\n                showTotal: total => `Total ${total} Items`,\r\n                current: 1,\r\n                total: 0,\r\n                pageSize: 20,\r\n            },\r\n            selectedFormLocale: {\r\n                languageId: 'nameEn',\r\n                locale: 'en',\r\n                name: 'English',\r\n                icon: 'us',\r\n            },\r\n            file: null,\r\n            files: [],\r\n            videos: [],\r\n            text: {\r\n                en: \"\",\r\n                ru: \"\",\r\n                uz: \"\",\r\n            }\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.onStartEvent()\r\n    }\r\n\r\n    onStartEvent = (payload) => {\r\n        ApiRequest(getService).then((result => {\r\n            if (result.success) {\r\n                this.setState((state, props) => ({\r\n                    list: result.object,\r\n                    pagination: {\r\n                        ...state.pagination,\r\n                        total: result.object.totalElements\r\n                    }\r\n                }));\r\n\r\n            }\r\n        }));\r\n    };\r\n\r\n\r\n    onRequestFunc = (path, data, message) => {\r\n        ApiRequest(path, data).then((result => {\r\n            if (result.success) {\r\n                this.setState({\r\n                    actionType: 'create',\r\n                    modalVisible: false,\r\n                    currentItem: {},\r\n                    text: {\r\n                        en: \"\",\r\n                        ru: \"\",\r\n                        uz: \"\",\r\n                    },\r\n                    file: null\r\n                });\r\n                notification.success({\r\n                    key: message.key,\r\n                    message: message.messageSuccess,\r\n                    description: message.descriptionSuccess,\r\n                });\r\n                this.onCancel();\r\n                this.onStartEvent();\r\n            } else {\r\n                notification.error({\r\n                    key: message.key,\r\n                    message: message.messageError,\r\n                    description: message.descriptionError,\r\n                });\r\n            }\r\n        }))\r\n    };\r\n    onFormLocale = (dataItem) => {\r\n        return this.setState({\r\n            selectedFormLocale: dataItem\r\n        })\r\n    };\r\n    onSubmit = (data) => {\r\n        let message = {};\r\n        if (this.state.actionType === \"create\") {\r\n            message = {\r\n                key: \"create\",\r\n                messageError: intlMessages({\r\n                    en: \"There was an error creating\",\r\n                    ru: \"Произошла ошибка при создании\",\r\n                    uz: \"Yaratishda xatolik yuz berdi\"\r\n                }),\r\n                messageSuccess: intlMessages({\r\n                    en: \"Successfully created\",\r\n                    ru: \"Успешно создан\",\r\n                    uz: \"Muvaffaqqiyatli yaratildi\"\r\n                }),\r\n            };\r\n\r\n            this.onRequestFunc(postService, data, message)\r\n        }\r\n        if (this.state.actionType === \"update\") {\r\n            message = {\r\n                key: \"update\",\r\n                messageError: intlMessages({\r\n                    en: \"There was an error updating\",\r\n                    ru: \"Произошла ошибка при изменение\",\r\n                    uz: \"Tahrirlashda xatolik yuz berdi\"\r\n                }),\r\n                messageSuccess: intlMessages({\r\n                    en: \"Successfully updated\",\r\n                    ru: \"Успешно изменено\",\r\n                    uz: \"Muvaffaqqiyatli tahrirlandi\"\r\n                }),\r\n            };\r\n            this.onRequestFunc(putService, {\r\n                id: this.state.currentItem.id, ...data\r\n            }, message)\r\n        }\r\n    };\r\n    onCancel = () => {\r\n        this.setState({\r\n                modalVisible: false,\r\n                actionType: 'create',\r\n                videos: [],\r\n                files: [],\r\n                file: null,\r\n                text: {\r\n                    en: \"\",\r\n                    ru: \"\",\r\n                    uz: \"\",\r\n                },\r\n                selectedFormLocale: {\r\n                    languageId: 'nameEn',\r\n                    locale: 'en',\r\n                    name: 'English',\r\n                    icon: 'us',\r\n                }\r\n            }\r\n        )\r\n    };\r\n    onAdd = () => {\r\n        this.setState({ modalVisible: true, actionType: 'create' })\r\n    };\r\n    onDelete = (dataItemId) => {\r\n        let message = {\r\n            key: \"delete\",\r\n            messageError: intlMessages({\r\n                en: \"There was an error deleting\",\r\n                ru: \"Произошла ошибка при удалении\",\r\n                uz: \"O'chirishda xatolik yuz berdi\"\r\n            }),\r\n            messageSuccess: intlMessages({\r\n                en: \"Successfully deleted\",\r\n                ru: \"Успешно удален\",\r\n                uz: \"Muvaffaqqiyatli o'chirildi\"\r\n            }),\r\n        };\r\n        this.onRequestFunc(deleteService, { id: dataItemId }, message)\r\n    };\r\n    onChangeFile = (file) => {\r\n        this.setState({\r\n            file: file\r\n        })\r\n    };\r\n    onChangeAnyFile = (files) => {\r\n        this.setState({\r\n            files: files\r\n        })\r\n    };\r\n    onChangeAnyFileVideo = (files) => {\r\n        this.setState({\r\n            videos: files\r\n        })\r\n    };\r\n    onEditItem = (dataItem) => {\r\n        let files = [];\r\n        let videos = [];\r\n        if (dataItem['otherAttachmentList'].length !== 0) {\r\n            dataItem['otherAttachmentList'].map((item) => {\r\n                return files.push({\r\n                    fileUrl: apiFileUrl + item.id,\r\n                    file: item,\r\n                    fileStatus: \"create\"\r\n                })\r\n            })\r\n        }\r\n        if (dataItem['videos'].length !== 0) {\r\n            dataItem['videos'].map((item) => {\r\n                return videos.push({\r\n                    fileUrl: apiFileUrl + item.id,\r\n                    file: item,\r\n                    fileStatus: \"create\"\r\n                })\r\n            })\r\n        }\r\n        this.setState({\r\n            actionType: \"update\",\r\n            text: {\r\n                en: EditorState.createWithContent(\r\n                    ContentState.createFromBlockArray(\r\n                        convertFromHTML(dataItem.textEn)\r\n                    )\r\n                )\r\n                ,\r\n                ru: EditorState.createWithContent(\r\n                    ContentState.createFromBlockArray(\r\n                        convertFromHTML(dataItem.textRu)\r\n                    )\r\n                ),\r\n                uz: EditorState.createWithContent(\r\n                    ContentState.createFromBlockArray(\r\n                        convertFromHTML(dataItem.textUz)\r\n                    )\r\n                ),\r\n            },\r\n            currentItem: dataItem,\r\n            files: files,\r\n            videos: videos,\r\n            file: dataItem.mainAttachment ? {\r\n                fileUrl: apiFileUrl + dataItem.mainAttachment.id,\r\n                file: dataItem.mainAttachment,\r\n                fileStatus: \"create\"\r\n            } : null,\r\n            modalVisible: true,\r\n        })\r\n    };\r\n    onTextChange = (e) => {\r\n        let { text, selectedFormLocale } = this.state;\r\n        text[selectedFormLocale['locale']] = e;\r\n        this.setState({\r\n            text: text\r\n        })\r\n    };\r\n\r\n    render() {\r\n        const { currentItem, modalVisible, text, file, files, videos, columns, formItems, list, actionType, pagination, selectedFormLocale } = this.state;\r\n       return (\r\n            <Card>\r\n                <Filter onAdd={this.onAdd} />\r\n                <List visibleColumns={columns}\r\n                      dataSource={list}\r\n                      onEditItem={this.onEditItem}\r\n                      pagination={pagination.total >= 10 ? {\r\n                          ...pagination,\r\n                      } : false}\r\n                      onDeleteItem={this.onDelete} />\r\n                <Modal\r\n                    onSubmit={this.onSubmit}\r\n                    onCancel={this.onCancel}\r\n                    onChangeFile={this.onChangeFile}\r\n                    onChangeAnyFile={this.onChangeAnyFile}\r\n                    onChangeAnyFileVideo={this.onChangeAnyFileVideo}\r\n                    onFormLocale={this.onFormLocale}\r\n                    onTextChange={this.onTextChange}\r\n                    file={file}\r\n                    files={files}\r\n                    videos={videos}\r\n                    text={text}\r\n                    modalVisible={modalVisible}\r\n                    selectedFormLocale={selectedFormLocale}\r\n                    formItems={formItems}\r\n                    actionType={actionType}\r\n                    currentItem={actionType === 'create' ? {} : currentItem}\r\n                />\r\n            </Card>\r\n        );\r\n    }\r\n}\r\n\r\n\r\nexport default Certificates;\r\n"]},"metadata":{},"sourceType":"module"}