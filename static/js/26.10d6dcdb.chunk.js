(this["webpackJsonpArk-Logistics"]=this["webpackJsonpArk-Logistics"]||[]).push([[26],{1332:function(e,t,a){"use strict";a.r(t);var r=a(17),n=a(18),s=a(20),i=a(19),o=a(0),l=a.n(o),u=a(15),c=a(68),m=a(2),p=a(362),f=a(1295),d=a(1339),h=a(106),b=c.Form.Item,E={labelCol:{span:24},wrapperCol:{span:24}},g={span:12,offset:6},j={span:6,offset:9},y=c.Form.create()((function(e){var t=e.currentItem,a=e.onSubmit,r=e.formItems,n=e.onChangeFile,s=e.file,i=e.form,o=i.getFieldDecorator,y=i.validateFields,O=i.getFieldsValue,k=r.map((function(e){return l.a.createElement(f.a,Object.assign({},g,{key:e.name}),l.a.createElement(b,Object.assign({className:"mb-0",label:e.label,hasFeedback:!0},E),o(e.name,Object(u.a)({initialValue:t[e.name]},e))(e.obj)))}));return l.a.createElement(d.a,{className:"h-100 page-info"},l.a.createElement(c.Form,{layout:"horizontal",onSubmit:function(e){e.preventDefault(),y((function(e){if(!e){var r=O();r.id=t.id,r.file=null===s?{}:s.file,r.type=!0,r.fileUpload=!0,r.password=r.nowPassword,s&&"delete"===s.fileStatus&&(r.file={}),s&&"create"===s.fileStatus&&(r.photoId=t.photo&&t.photo.id),s&&!s.fileStatus&&(r.file={},r.photoId=t.photo&&t.photo.id),a(r)}}))}},l.a.createElement(f.a,g,l.a.createElement(p.a,{name:"file",colLayout:j,title:l.a.createElement(m.a,{id:"attachment"}),types:["image/jpeg","image/png","image/jpg"],size:50,file:s,onChangeFile:n,formItemLayout:E})),k,l.a.createElement(f.a,Object.assign({},g,{className:"mt-3"}),l.a.createElement(h.a,{type:"primary",htmlType:"submit",className:"btn-block"},l.a.createElement(m.a,{id:"updateInfo"})))))})),O=a(1307),k=a(1312),F=a(367),I=a(31),R=a(33),S=a(25),U=a(203),w=a(26),C=R.a.postCurrentUserInfoEdit,N=R.a.userMe,v=function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).getCurrentUser=function(){Object(I.a)(N).then((function(e){e.success&&n.props.onAuthUser(e.object)}))},n.onRequestFunc=function(e,t,a){Object(I.a)(e,t).then((function(e){e.success?(n.getCurrentUser(),O.a.success({key:a.key,message:a.messageSuccess,description:a.descriptionSuccess})):O.a.error({key:a.key,message:a.messageError,description:a.descriptionError})}))},n.onSubmit=function(e){var t={key:"update",messageError:Object(m.b)({en:"There was an error updating",ru:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435",uz:"Tahrirlashda xatolik yuz berdi"}),messageSuccess:Object(m.b)({en:"Successfully updated",ru:"\u0423\u0441\u043f\u0435\u0448\u043d\u043e \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u043e",uz:"Muvaffaqqiyatli tahrirlandi"})};n.onRequestFunc(C,e,t)},n.onChangeFile=function(e){n.setState({file:e})},n.state={currentItem:n.props.authUser,file:n.props.authUser.photo?{fileUrl:w.b+n.props.authUser.photo.id,file:n.props.authUser.photo,fileStatus:"create"}:null,formItems:[{label:l.a.createElement(m.a,{id:"firstName"}),name:"firstName",rules:[{required:!0,message:l.a.createElement(m.a,{id:"E_ERROR"})}],obj:l.a.createElement(k.a,null)},{label:l.a.createElement(m.a,{id:"lastName"}),name:"lastName",rules:[{required:!0,message:l.a.createElement(m.a,{id:"E_ERROR"})}],obj:l.a.createElement(k.a,null)},{label:l.a.createElement(m.a,{id:"phoneNumber"}),name:"phoneNumber",rules:[{required:!0,message:l.a.createElement(m.a,{id:"E_ERROR"})}],obj:l.a.createElement(F.a,{mask:"+998111111111",name:"phoneNumber"})},{label:l.a.createElement(m.a,{id:"password"}),name:"nowPassword",rules:[{required:!0,message:l.a.createElement(m.a,{id:"E_ERROR"})}],obj:l.a.createElement(k.a.Password,null)}]},n}return Object(n.a)(a,[{key:"render",value:function(){return l.a.createElement(y,{file:this.state.file,currentItem:this.state.currentItem,formItems:this.state.formItems,onSubmit:this.onSubmit,onChangeFile:this.onChangeFile})}}]),a}(o.Component);t.default=Object(S.b)((function(e){return{authUser:e.auth.authUser}}),{onAuthUser:U.a})(v)}}]);
//# sourceMappingURL=26.10d6dcdb.chunk.js.map